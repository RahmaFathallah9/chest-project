/**
 * jCarousel - Riding carousels with jQuery
 *   http://sorgalla.com/jcarousel/
 *
 * Copyright (c) 2006 Jan Sorgalla (http://sorgalla.com)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * Built on top of the jQuery library
 *   http://jquery.com
 *
 * Inspired by the "Carousel Component" by Bill Scott
 *   http://billwscott.com/carousel/
 */
function createMethod(t){return function(){throw new Error('The "'+t+"\" method is not available on the playback technology's API")}}function OldGallery(t){this.el=$(t),this.init=function(t,e){this.$(".carousel").length>0?this.loadCarousel(t,e):this.loadSolitaryStack(t);var i=this;this.el.hover(function(){i.hovering=!0},function(){i.hovering=!1}),$(document).keydown(function(t){return!i.hovering||(i.keydown_handler(t),!1)})},this.$=function(t){return $(t,this.el)},this.loadSolitaryStack=function(){this.currentStack=new OldStack(this.$(".window")),this.currentStack.init(),this.currentStack.activateVideos()},this.loadCarousel=function(t,e){this.$("div.loading").show();var i=this;this.$(".carousel").load(this.$(".carousel").attr("data-resource-url"),function(){i.$("div.loading").hide(),i.initializeJCarousel(t),e&&e()})},this.clickThumb=function(t){var e=t.siblings("ul.stack");this.$(".carousel > li.current").removeClass("current"),t.parent().addClass("current"),this.$(".image.target video").each(function(){videojs(this).ready(function(){this.dispose()})}),this.$(".image.target ul.stack").replaceWith(e.clone()),this.$(".image.target ul.stack li").hasClass("current")||this.$(".image.target ul.stack li:first").addClass("current"),this.currentStack=new OldStack(this.$(".window")),this.currentStack.init();var i=t.siblings("div.hidden-desc");this.$("div.main-desc").html(i.html()),this.$("div.main-study-desc").html(t.siblings("div.hidden-study-desc").html()),t.trigger("imageChanged")},this.initializeJCarousel=function(t){this.$(".carousel").jcarousel({scroll:1});var e=this;this.$(".carousel > li > a.thumbnail").live("click",function(t){e.clickThumb($(this)),t.preventDefault()}),this.$(".carousel > li:first > a.thumbnail").click(),this.$(".carousel").find("li").removeClass("current"),this.$(".carousel").find("li#image-"+t).addClass("current"),this.$(".carousel").trigger("imageChanged")},this.keydown_handler=function(t){if(!(t.which<37||t.which>40)){switch(t.which){case 37:case 39:var e=$(".carousel > li.current"),i=37==t.which?e.prev("li"):e.next("li");i.length>0&&(e.removeClass("current"),i.addClass("current"),$("a.thumbnail",i).trigger("click"));break;case 38:case 40:this.changeImageBy(t.which>38?-1:1)}t.preventDefault()}},this.changeImageBy=function(t){"undefined"!=typeof this.currentStack&&this.currentStack.changeImageBy(t)},this.empty=function(){this.$(".image.target ul.stack").empty(),this.$("div.main-desc").empty(),this.$("div.main-study-desc").empty()}}function OldStack(t,e){this.el=$(t),e&&(this.scrollbar=$(e)),this.bind_this=function(t){var e=this;return function(){return t.apply(e,arguments)}},this.$=function(t){return $(t,this.el)},this.init=function(){if(this.load_stack(this.currentStack()),this.requires_scrollbars()){this.el.mousewheel(function(){return!1}),this.el.unbind("mousewheel").mousewheel(this.bind_this(this.mousewheel_handler));var t=this;this.$(".mousewheel a").unbind("click").click(function(){return t.changeImageBy($(this).hasClass("up")?1:-1),!1})}else this.el.unbind("mousewheel");$("body").data().touchBrowser||$(".js-tooltip").tooltip()},this.currentStack=function(){return this.$("ul.stack:visible")},this.currentImage=function(){return $("li.current",this.currentStack())},this.scrollbar_wrap=function(){return this.scrollbar||this.$("#scrollbar-wrap")},this.changeImageBy=function(t){this.changeImage(t>0?this.currentImage().prev():this.currentImage().next())},this.changeImage=function(t){if(0!=t.length){this.currentImage().removeClass("current"),t.addClass("current");var e=$("li",this.currentStack());$("#scrollbar",this.scrollbar_wrap()).slider("option","value",e.length-1-e.index(t))}},this.mousewheel_handler=function(t){t.preventDefault();var e=t.deltaY;t.deltaFactor<=2&&(e/=25),0!=e&&this.changeImageBy(Math.min(1,Math.max(-1,e)))},this.update_remaining=function(){var t=this.num_to_load;if(t){var e=1==t?" image":" images";this.$("span.remaining").text(t+e)}else this.hide_loading_overlay()},this.hide_loading_overlay=function(){this.$(".image-desc").fadeOut("normal")},this.load_media_from_link=function(t,e){var i=(e=$(e)).attr("data-content-type");return i&&0==i.indexOf("video")?this.load_video_from_link(t,e):this.load_image_from_link(t,e)},this.load_image_from_link=function(t,e){e=$(e);var i=$(document.createElement("img")),s=this;i.load(function(){s.num_to_load-=1,s.update_remaining()}),i.attr("src",e.attr("href")),i.attr("style",e.attr("style")),jQuery.browser.msie&&(i.removeAttr("height"),i.removeAttr("width")),i.attr("data-width",e.attr("data-width")),i.attr("data-height",e.attr("data-height")),e.replaceWith(i)},this.load_video_from_link=function(t,e){var i=$(e).attr("data-video-id"),s='<!-- Begin VideoJS -->       <div class="video-js-box">         <video class="video-js vjs-default-skin vjs-big-play-centered" width="630" height="630" controls preload="none" loop>           <source type=\'video/mp4\' />         </video>       </div>       <!-- End VideoJS -->';s=$(s),$("video source",s).attr("src",e.attr("href")),$("video",s).attr({id:i,width:e.attr("data-width"),height:e.attr("data-height")}),e.replaceWith(s),this.activateVideos()},this.load_stack=function(t){var e=this,i=$("li > a",t);i.each(this.bind_this(this.load_media_from_link));var s=this.stack_length(t);if(s>1){this.scrollbar_wrap().show();var n=$("#scrollbar",this.scrollbar_wrap());n.slider("instance")!==undefined&&n.slider("destroy"),n.slider({orientation:"vertical",min:0,max:s-1,value:s-1,slide:function(t,i){e.changeImage($("li:eq("+(s-1-i.value)+")",e.currentStack()))}}),this.num_to_load=i.length,this.num_to_load>1&&(this.update_remaining(),this.$(".image-desc").fadeIn("normal",e.bind_this(e.update_remaining)));var o=$("li.current",this.currentStack()).first();this.changeImage(o)}else this.scrollbar_wrap().hide()},this.stack_length=function(t){return t.children("li").length},this.requires_scrollbars=function(){return this.stack_length(this.currentStack())>1},this.activateVideos=function(){this.$("video:visible").each(function(){videojs(this,{preload:"none"})})}}!function(t){t.fn.jcarousel=function(e,s,n){return"string"==typeof e?t(this).data("jcarousel")[e](s,n):this.each(function(){t(this).data("jcarousel",new i(this,e))})};var e={vertical:!1,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",buttonNextCallback:null,buttonPrevCallback:null};t.jcarousel=function(i,s){this.options=t.extend({},e,s||{}),this.locked=!1,this.container=null,this.clip=null,this.list=null,this.buttonNext=null,this.buttonPrev=null,this.wh=this.options.vertical?"height":"width",this.lt=this.options.vertical?"top":"left";for(var n="",o=i.className.split(" "),r=0;r<o.length;r++)if(-1!=o[r].indexOf("jcarousel-skin")){t(i).removeClass(o[r]);n=o[r];break}"UL"==i.nodeName||"OL"==i.nodeName?(this.list=t(i),this.container=this.list.parent(),this.container.hasClass("jcarousel-clip")?(this.container.parent().hasClass("jcarousel-container")||(this.container=this.container.wrap("<div></div>")),this.container=this.container.parent()):this.container.hasClass("jcarousel-container")||(this.container=this.list.wrap("<div></div>").parent())):(this.container=t(i),this.list=t(i).find(">ul,>ol,div>ul,div>ol")),""!=n&&-1==this.container.parent()[0].className.indexOf("jcarousel-skin")&&this.container.wrap('<div class=" '+n+'"></div>'),this.clip=this.list.parent(),this.clip.length&&this.clip.hasClass("jcarousel-clip")||(this.clip=this.list.wrap("<div></div>").parent()),this.buttonPrev=t(".jcarousel-prev",this.container),0==this.buttonPrev.size()&&null!=this.options.buttonPrevHTML&&(this.buttonPrev=this.clip.before(this.options.buttonPrevHTML).prev()),this.buttonPrev.addClass(this.className("jcarousel-prev")),this.buttonNext=t(".jcarousel-next",this.container),0==this.buttonNext.size()&&null!=this.options.buttonNextHTML&&(this.buttonNext=this.clip.before(this.options.buttonNextHTML).prev()),this.buttonNext.addClass(this.className("jcarousel-next")),this.clip.addClass(this.className("jcarousel-clip")),this.list.addClass(this.className("jcarousel-list")),this.container.addClass(this.className("jcarousel-container"));var a=null!=this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,l=this.list.children("li"),c=this;if(l.size()>0){var u=0;r=this.options.offset;l.each(function(){c.format(this,r++),u+=c.dimension(this,a)}),this.list.css(this.wh,u+"px"),s&&s.size!==undefined||(this.options.size=l.size())}this.container.css("display","block"),this.buttonNext.css("display","block"),this.buttonPrev.css("display","block"),this.funcNext=function(){c.next()},this.funcPrev=function(){c.prev()},this.funcResize=function(){c.reload()},null!=this.options.initCallback&&this.options.initCallback(this,"init"),this.setup()};var i=t.jcarousel;i.fn=i.prototype={jcarousel:"0.2.3"},i.fn.extend=i.extend=t.extend,i.fn.extend({setup:function(){if(this.first=null,this.last=null,this.prevFirst=null,this.prevLast=null,this.animating=!1,this.timer=null,this.tail=null,this.inTail=!1,!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var e=this.pos(this.options.start);this.prevFirst=this.prevLast=null,this.animate(e,!1),t(window).unbind("resize",this.funcResize).bind("resize",this.funcResize)}},reset:function(){this.list.empty(),this.list.css(this.lt,"0px"),this.list.css(this.wh,"10px"),null!=this.options.initCallback&&this.options.initCallback(this,"reset"),this.setup()},reload:function(){if(null!=this.tail&&this.inTail&&this.list.css(this.lt,i.intval(this.list.css(this.lt))+this.tail),this.tail=null,this.inTail=!1,null!=this.options.reloadCallback&&this.options.reloadCallback(this),null!=this.options.visible){var e=this,s=Math.ceil(this.clipping()/this.options.visible),n=0,o=0;t("li",this.list).each(function(t){n+=e.dimension(this,s),t+1<e.first&&(o=n)}),this.list.css(this.wh,n+"px"),this.list.css(this.lt,-o+"px")}this.scroll(this.first,!1)},lock:function(){this.locked=!0,this.buttons()},unlock:function(){this.locked=!1,this.buttons()},size:function(t){return t!=undefined&&(this.options.size=t,this.locked||this.buttons()),this.options.size},has:function(t,e){e!=undefined&&e||(e=t),null!==this.options.size&&e>this.options.size&&(e=this.options.size);for(var i=t;i<=e;i++){var s=this.get(i);if(!s.length||s.hasClass("jcarousel-item-placeholder"))return!1}return!0},get:function(e){return t(".jcarousel-item-"+e,this.list)},add:function(t,e){var s=0;if(0==(o=this.get(t)).length){for(var n,o=this.create(t),r=i.intval(t);n=this.get(--r);)if(r<=0||n.length){r<=0?this.list.prepend(o):n.after(o);break}}else s=this.dimension(o);o.removeClass(this.className("jcarousel-item-placeholder")),"string"==typeof e?o.html(e):o.empty().append(e);var a=null!=this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,l=this.dimension(o,a)-s;return t>0&&t<this.first&&this.list.css(this.lt,i.intval(this.list.css(this.lt))-l+"px"),this.list.css(this.wh,i.intval(this.list.css(this.wh))+l+"px"),o},remove:function(t){var e=this.get(t);if(e.length&&!(t>=this.first&&t<=this.last)){var s=this.dimension(e);t<this.first&&this.list.css(this.lt,i.intval(this.list.css(this.lt))+s+"px"),e.remove(),this.list.css(this.wh,i.intval(this.list.css(this.wh))-s+"px")}},next:function(){this.stopAuto(),null==this.tail||this.inTail?this.scroll("both"!=this.options.wrap&&"last"!=this.options.wrap||null==this.options.size||this.last!=this.options.size?this.first+this.options.scroll:1):this.scrollTail(!1)},prev:function(){this.stopAuto(),null!=this.tail&&this.inTail?this.scrollTail(!0):this.scroll("both"!=this.options.wrap&&"first"!=this.options.wrap||null==this.options.size||1!=this.first?this.first-this.options.scroll:this.options.size)},scrollTail:function(t){if(!this.locked&&!this.animating&&this.tail){var e=i.intval(this.list.css(this.lt));t?e+=this.tail:e-=this.tail,this.inTail=!t,this.prevFirst=this.first,this.prevLast=this.last,this.animate(e)}},scroll:function(t,e){this.locked||this.animating||this.animate(this.pos(t),e)},pos:function(t){if(!this.locked&&!this.animating){"circular"!=this.options.wrap&&(t=t<1?1:this.options.size&&t>this.options.size?this.options.size:t);for(var e=this.first>t,s=i.intval(this.list.css(this.lt)),n="circular"!=this.options.wrap&&this.first<=1?1:this.first,o=e?this.get(n):this.get(this.last),r=e?n:n-1,a=null,l=0,c=!1,u=0;e?--r>=t:++r<t;)c=!(a=this.get(r)).length,0==a.length&&(a=this.create(r).addClass(this.className("jcarousel-item-placeholder")),o[e?"before":"after"](a)),o=a,u=this.dimension(a),c&&(l+=u),null!=this.first&&("circular"==this.options.wrap||r>=1&&(null==this.options.size||r<=this.options.size))&&(s=e?s+u:s-u);var h=this.clipping(),p=[],d=0,v=(r=t,0);for(o=this.get(t-1);++d;){if(c=!(a=this.get(r)).length,0==a.length&&(a=this.create(r).addClass(this.className("jcarousel-item-placeholder")),0==o.length?this.list.prepend(a):o[e?"before":"after"](a)),o=a,0==(u=this.dimension(a)))return window.console&&console.log("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting..."),0;if("circular"!=this.options.wrap&&null!==this.options.size&&r>this.options.size?p.push(a):c&&(l+=u),(v+=u)>=h)break;r++}for(var f=0;f<p.length;f++)p[f].remove();l>0&&(this.list.css(this.wh,this.dimension(this.list)+l+"px"),e&&(s-=l,this.list.css(this.lt,i.intval(this.list.css(this.lt))-l+"px")));var m=t+d-1;if("circular"!=this.options.wrap&&this.options.size&&m>this.options.size&&(m=this.options.size),r>m)for(d=0,r=m,v=0;++d;){if(!(a=this.get(r--)).length)break;if((v+=this.dimension(a))>=h)break}var g=m-d+1;if("circular"!=this.options.wrap&&g<1&&(g=1),this.inTail&&e&&(s+=this.tail,this.inTail=!1),this.tail=null,"circular"!=this.options.wrap&&m==this.options.size&&m-d+1>=1){var y=i.margin(this.get(m),this.options.vertical?"marginBottom":"marginRight");v-y>h&&(this.tail=v-h-y)}for(;t-- >g;)s+=this.dimension(this.get(t));return this.prevFirst=this.first,this.prevLast=this.last,this.first=g,this.last=m,s}},animate:function(t,e){if(!this.locked&&!this.animating){this.animating=!0;var i=this,s=function(){i.animating=!1,0==t&&i.list.css(i.lt,0),("circular"==i.options.wrap||"both"==i.options.wrap||"last"==i.options.wrap||null==i.options.size||i.last<i.options.size)&&i.startAuto(),i.buttons(),i.notify("onAfterAnimation")};if(this.notify("onBeforeAnimation"),this.options.animation&&0!=e){var n=this.options.vertical?{top:t}:{left:t};this.list.animate(n,this.options.animation,this.options.easing,s)}else this.list.css(this.lt,t+"px"),s()}},startAuto:function(t){if(t!=undefined&&(this.options.auto=t),0==this.options.auto)return this.stopAuto();if(null==this.timer){var e=this;this.timer=setTimeout(function(){e.next()},1e3*this.options.auto)}},stopAuto:function(){null!=this.timer&&(clearTimeout(this.timer),this.timer=null)},buttons:function(t,e){if(t==undefined||null==t){t=!this.locked&&0!==this.options.size&&(this.options.wrap&&"first"!=this.options.wrap||null==this.options.size||this.last<this.options.size);this.locked||this.options.wrap&&"first"!=this.options.wrap||null==this.options.size||!(this.last>=this.options.size)||(t=null!=this.tail&&!this.inTail)}if(e==undefined||null==e){e=!this.locked&&0!==this.options.size&&(this.options.wrap&&"last"!=this.options.wrap||this.first>1);this.locked||this.options.wrap&&"last"!=this.options.wrap||null==this.options.size||1!=this.first||(e=null!=this.tail&&this.inTail)}var i=this;this.buttonNext[t?"bind":"unbind"](this.options.buttonNextEvent,this.funcNext)[t?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",!t),this.buttonPrev[e?"bind":"unbind"](this.options.buttonPrevEvent,this.funcPrev)[e?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",!e),this.buttonNext.length>0&&(this.buttonNext[0].jcarouselstate==undefined||this.buttonNext[0].jcarouselstate!=t)&&null!=this.options.buttonNextCallback&&(this.buttonNext.each(function(){i.options.buttonNextCallback(i,this,t)}),this.buttonNext[0].jcarouselstate=t),this.buttonPrev.length>0&&(this.buttonPrev[0].jcarouselstate==undefined||this.buttonPrev[0].jcarouselstate!=e)&&null!=this.options.buttonPrevCallback&&(this.buttonPrev.each(function(){i.options.buttonPrevCallback(i,this,e)}),this.buttonPrev[0].jcarouselstate=e)},notify:function(t){var e=null==this.prevFirst?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",t,e),this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",t,e,this.first),this.callback("itemFirstOutCallback",t,e,this.prevFirst)),this.prevLast!==this.last&&(this.callback("itemLastInCallback",t,e,this.last),this.callback("itemLastOutCallback",t,e,this.prevLast)),this.callback("itemVisibleInCallback",t,e,this.first,this.last,this.prevFirst,this.prevLast),this.callback("itemVisibleOutCallback",t,e,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(e,i,s,n,o,r,a){if(this.options[e]!=undefined&&("object"==typeof this.options[e]||"onAfterAnimation"==i)){var l="object"==typeof this.options[e]?this.options[e][i]:this.options[e];if(t.isFunction(l)){var c=this;if(n===undefined)l(c,s,i);else if(o===undefined)this.get(n).each(function(){l(c,this,n,s,i)});else for(var u=n;u<=o;u++)null===u||u>=r&&u<=a||this.get(u).each(function(){l(c,this,u,s,i)})}}},create:function(t){return this.format("<li></li>",t)},format:function(e,i){var s=t(e).addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+i));return s.attr("jcarouselindex",i),s},className:function(t){return t+" "+t+(this.options.vertical?"-vertical":"-horizontal")},dimension:function(e,s){var n=e.jquery!=undefined?e[0]:e,o=this.options.vertical?n.offsetHeight+i.margin(n,"marginTop")+i.margin(n,"marginBottom"):n.offsetWidth+i.margin(n,"marginLeft")+i.margin(n,"marginRight");if(s==undefined||o==s)return o;var r=this.options.vertical?s-i.margin(n,"marginTop")-i.margin(n,"marginBottom"):s-i.margin(n,"marginLeft")-i.margin(n,"marginRight");return t(n).css(this.wh,r+"px"),this.dimension(n)},clipping:function(){return this.options.vertical?this.clip[0].offsetHeight-i.intval(this.clip.css("borderTopWidth"))-i.intval(this.clip.css("borderBottomWidth")):this.clip[0].offsetWidth-i.intval(this.clip.css("borderLeftWidth"))-i.intval(this.clip.css("borderRightWidth"))},index:function(t,e){return e==undefined&&(e=this.options.size),Math.round(((t-1)/e-Math.floor((t-1)/e))*e)+1}}),i.extend({defaults:function(i){return t.extend(e,i||{})},margin:function(e,s){if(!e)return 0;var n=e.jquery!=undefined?e[0]:e;if("marginRight"==s&&t.browser.safari){var o,r,a={display:"block",float:"none",width:"auto"};return t.swap(n,a,function(){o=n.offsetWidth}),a.marginRight=0,t.swap(n,a,function(){r=n.offsetWidth}),r-o}return i.intval(t.css(n,s))},intval:function(t){return t=parseInt(t),isNaN(t)?0:t}})}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?t(require("jquery")):t(window.jQuery||window.Zepto)}(function(t){var e,i,s,n,o,r,a="Close",l="BeforeClose",c="AfterClose",u="BeforeAppend",h="MarkupParse",p="Open",d="Change",v="mfp",f="."+v,m="mfp-ready",g="mfp-removing",y="mfp-prevent-close",j=function(){},b=!!window.jQuery,_=t(window),k=function(t,i){e.ev.on(v+t+f,i)},C=function(e,i,s,n){var o=document.createElement("div");return o.className="mfp-"+e,s&&(o.innerHTML=s),n?i&&i.appendChild(o):(o=t(o),i&&o.appendTo(i)),o},T=function(i,s){e.ev.triggerHandler(v+i,s),e.st.callbacks&&(i=i.charAt(0).toLowerCase()+i.slice(1),e.st.callbacks[i]&&e.st.callbacks[i].apply(e,t.isArray(s)?s:[s]))},w=function(i){return i===r&&e.currTemplate.closeBtn||(e.currTemplate.closeBtn=t(e.st.closeMarkup.replace("%title%",e.st.tClose)),r=i),e.currTemplate.closeBtn},x=function(){t.magnificPopup.instance||((e=new j).init(),t.magnificPopup.instance=e)},S=function(){var t=document.createElement("p").style,e=["ms","O","Moz","Webkit"];if(t.transition!==undefined)return!0;for(;e.length;)if(e.pop()+"Transition"in t)return!0;return!1};j.prototype={constructor:j,init:function(){var i=navigator.appVersion;e.isLowIE=e.isIE8=document.all&&!document.addEventListener,e.isAndroid=/android/gi.test(i),e.isIOS=/iphone|ipad|ipod/gi.test(i),e.supportsTransition=S(),e.probablyMobile=e.isAndroid||e.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),s=t(document),e.popupsCache={}},open:function(i){var n;if(!1===i.isObj){e.items=i.items.toArray(),e.index=0;var r,a=i.items;for(n=0;n<a.length;n++)if((r=a[n]).parsed&&(r=r.el[0]),r===i.el[0]){e.index=n;break}}else e.items=t.isArray(i.items)?i.items:[i.items],e.index=i.index||0;if(!e.isOpen){e.types=[],o="",i.mainEl&&i.mainEl.length?e.ev=i.mainEl.eq(0):e.ev=s,i.key?(e.popupsCache[i.key]||(e.popupsCache[i.key]={}),e.currTemplate=e.popupsCache[i.key]):e.currTemplate={},e.st=t.extend(!0,{},t.magnificPopup.defaults,i),e.fixedContentPos="auto"===e.st.fixedContentPos?!e.probablyMobile:e.st.fixedContentPos,e.st.modal&&(e.st.closeOnContentClick=!1,e.st.closeOnBgClick=!1,e.st.showCloseBtn=!1,e.st.enableEscapeKey=!1),e.bgOverlay||(e.bgOverlay=C("bg").on("click"+f,function(){e.close()}),e.wrap=C("wrap").on("click"+f,function(t){e._checkIfClose(t.target)&&e.close()}),e.container=C("container",e.wrap)),e.contentContainer=C("content"),e.st.preloader&&(e.preloader=C("preloader",e.container,e.st.tLoading));var l=t.magnificPopup.modules;for(n=0;n<l.length;n++){var c=l[n];c=c.charAt(0).toUpperCase()+c.slice(1),e["init"+c].call(e)}T("BeforeOpen"),e.st.showCloseBtn&&(e.st.closeBtnInside?(k(h,function(t,e,i,s){i.close_replaceWith=w(s.type)}),o+=" mfp-close-btn-in"):e.wrap.append(w())),e.st.alignTop&&(o+=" mfp-align-top"),e.fixedContentPos?e.wrap.css({overflow:e.st.overflowY,overflowX:"hidden",overflowY:e.st.overflowY}):e.wrap.css({top:_.scrollTop(),position:"absolute"}),(!1===e.st.fixedBgPos||"auto"===e.st.fixedBgPos&&!e.fixedContentPos)&&e.bgOverlay.css({height:s.height(),position:"absolute"}),e.st.enableEscapeKey&&s.on("keyup"+f,function(t){27===t.keyCode&&e.close()}),_.on("resize"+f,function(){e.updateSize()}),e.st.closeOnContentClick||(o+=" mfp-auto-cursor"),o&&e.wrap.addClass(o);var u=e.wH=_.height(),d={};if(e.fixedContentPos&&e._hasScrollBar(u)){var v=e._getScrollbarSize();v&&(d.marginRight=v)}e.fixedContentPos&&(e.isIE7?t("body, html").css("overflow","hidden"):d.overflow="hidden");var g=e.st.mainClass;return e.isIE7&&(g+=" mfp-ie7"),g&&e._addClassToMFP(g),e.updateItemHTML(),T("BuildControls"),t("html").css(d),e.bgOverlay.add(e.wrap).prependTo(e.st.prependTo||t(document.body)),e._lastFocusedEl=document.activeElement,e._previousScrollHeight=_.scrollTop(),setTimeout(function(){_.scrollTop(e._previousScrollHeight),e.content?(e._addClassToMFP(m),e._setFocus()):e.bgOverlay.addClass(m),s.on("focusin"+f,e._onFocusIn)},16),e.isOpen=!0,e.updateSize(u),T(p),i}e.updateItemHTML()},close:function(){e.isOpen&&(T(l),e.isOpen=!1,e.st.removalDelay&&!e.isLowIE&&e.supportsTransition?(e._addClassToMFP(g),setTimeout(function(){e._close()},e.st.removalDelay)):e._close())},_close:function(){T(a);var i=g+" "+m+" ";if(e.bgOverlay.detach(),e.wrap.detach(),e.container.empty(),e.st.mainClass&&(i+=e.st.mainClass+" "),e._removeClassFromMFP(i),e.fixedContentPos){var n={marginRight:""};e.isIE7?t("body, html").css("overflow",""):n.overflow="",t("html").css(n)}s.off("keyup"+f+" focusin"+f),e.ev.off(f),e.wrap.attr("class","mfp-wrap").removeAttr("style"),e.bgOverlay.attr("class","mfp-bg"),e.container.attr("class","mfp-container"),!e.st.showCloseBtn||e.st.closeBtnInside&&!0!==e.currTemplate[e.currItem.type]||e.currTemplate.closeBtn&&e.currTemplate.closeBtn.detach(),e.st.autoFocusLast&&e._lastFocusedEl?t(e._lastFocusedEl).focus():_.scrollTop(e._previousScrollHeight),e.currItem=null,e.content=null,e.currTemplate=null,e.prevHeight=0,T(c)},updateSize:function(t){if(e.isIOS){var i=document.documentElement.clientWidth/window.innerWidth,s=window.innerHeight*i;e.wrap.css("height",s),e.wH=s}else e.wH=t||_.height();e.fixedContentPos,T("Resize")},updateItemHTML:function(){var i=e.items[e.index];e.contentContainer.detach(),e.content&&e.content.detach(),i.parsed||(i=e.parseEl(e.index));var s=i.type;if(T("BeforeChange",[e.currItem?e.currItem.type:"",s]),e.currItem=i,!e.currTemplate[s]){var o=!!e.st[s]&&e.st[s].markup;T("FirstMarkupParse",o),e.currTemplate[s]=!o||t(o)}n&&n!==i.type&&e.container.removeClass("mfp-"+n+"-holder");var r=e["get"+s.charAt(0).toUpperCase()+s.slice(1)](i,e.currTemplate[s]);e.appendContent(r,s),i.preloaded=!0,T(d,i),n=i.type,e.container.prepend(e.contentContainer),T("AfterChange")},appendContent:function(t,i){e.content=t,t?e.st.showCloseBtn&&e.st.closeBtnInside&&!0===e.currTemplate[i]?e.content.find(".mfp-close").length||e.content.append(w()):e.content=t:e.content="",T(u),e.container.addClass("mfp-"+i+"-holder"),e.contentContainer.append(e.content)},parseEl:function(i){var s,n=e.items[i];if(n.tagName?n={el:t(n)}:(s=n.type,n={data:n,src:n.src}),n.el){for(var o=e.types,r=0;r<o.length;r++)if(n.el.hasClass("mfp-"+o[r])){s=o[r];break}n.src=n.el.attr("data-mfp-src"),n.src||(n.src=n.el.attr("href"))}return n.type=s||e.st.type||"inline",n.index=i,n.parsed=!0,e.items[i]=n,T("ElementParse",n),e.items[i]},addGroup:function(t,i){var s=function(s){s.mfpEl=this,e._openClick(s,t,i)};i||(i={});var n="click.magnificPopup";i.mainEl=t,i.items?(i.isObj=!0,t.off(n).on(n,s)):(i.isObj=!1,i.delegate?t.off(n).on(n,i.delegate,s):(i.items=t,t.off(n).on(n,s)))},_openClick:function(i,s,n){if((n.midClick!==undefined?n.midClick:t.magnificPopup.defaults.midClick)||!(2===i.which||i.ctrlKey||i.metaKey||i.altKey||i.shiftKey)){var o=n.disableOn!==undefined?n.disableOn:t.magnificPopup.defaults.disableOn;if(o)if(t.isFunction(o)){if(!o.call(e))return!0}else if(_.width()<o)return!0;i.type&&(i.preventDefault(),e.isOpen&&i.stopPropagation()),n.el=t(i.mfpEl),n.delegate&&(n.items=s.find(n.delegate)),e.open(n)}},updateStatus:function(t,s){if(e.preloader){i!==t&&e.container.removeClass("mfp-s-"+i),s||"loading"!==t||(s=e.st.tLoading);var n={status:t,text:s};T("UpdateStatus",n),t=n.status,s=n.text,e.preloader.html(s),e.preloader.find("a").on("click",function(t){t.stopImmediatePropagation()}),e.container.addClass("mfp-s-"+t),i=t}},_checkIfClose:function(i){if(!t(i).hasClass(y)){var s=e.st.closeOnContentClick,n=e.st.closeOnBgClick;if(s&&n)return!0;if(!e.content||t(i).hasClass("mfp-close")||e.preloader&&i===e.preloader[0])return!0;if(i===e.content[0]||t.contains(e.content[0],i)){if(s)return!0}else if(n&&t.contains(document,i))return!0;return!1}},_addClassToMFP:function(t){e.bgOverlay.addClass(t),e.wrap.addClass(t)},_removeClassFromMFP:function(t){this.bgOverlay.removeClass(t),e.wrap.removeClass(t)},_hasScrollBar:function(t){return(e.isIE7?s.height():document.body.scrollHeight)>(t||_.height())},_setFocus:function(){(e.st.focus?e.content.find(e.st.focus).eq(0):e.wrap).focus()},_onFocusIn:function(i){if(i.target!==e.wrap[0]&&!t.contains(e.wrap[0],i.target))return e._setFocus(),!1},_parseMarkup:function(e,i,s){var n;s.data&&(i=t.extend(s.data,i)),T(h,[e,i,s]),t.each(i,function(i,s){if(s===undefined||!1===s)return!0;if((n=i.split("_")).length>1){var o=e.find(f+"-"+n[0]);if(o.length>0){var r=n[1];"replaceWith"===r?o[0]!==s[0]&&o.replaceWith(s):"img"===r?o.is("img")?o.attr("src",s):o.replaceWith(t("<img>").attr("src",s).attr("class",o.attr("class"))):o.attr(n[1],s)}}else e.find(f+"-"+i).html(s)})},_getScrollbarSize:function(){if(e.scrollbarSize===undefined){var t=document.createElement("div");t.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(t),e.scrollbarSize=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return e.scrollbarSize}},t.magnificPopup={instance:null,proto:j.prototype,modules:[],open:function(e,i){return x(),(e=e?t.extend(!0,{},e):{}).isObj=!0,e.index=i||0,this.instance.open(e)},close:function(){return t.magnificPopup.instance&&t.magnificPopup.instance.close()},registerModule:function(e,i){i.options&&(t.magnificPopup.defaults[e]=i.options),t.extend(this.proto,i.proto),this.modules.push(e)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!1,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},t.fn.magnificPopup=function(i){x();var s=t(this);if("string"==typeof i)if("open"===i){var n,o=b?s.data("magnificPopup"):s[0].magnificPopup,r=parseInt(arguments[1],10)||0;o.items?n=o.items[r]:(n=s,o.delegate&&(n=n.find(o.delegate)),n=n.eq(r)),e._openClick({mfpEl:n},s,o)}else e.isOpen&&e[i].apply(e,Array.prototype.slice.call(arguments,1));else i=t.extend(!0,{},i),b?s.data("magnificPopup",i):s[0].magnificPopup=i,e.addGroup(s,i);return s};var I,P,E,M="inline",F=function(){E&&(P.after(E.addClass(I)).detach(),E=null)};t.magnificPopup.registerModule(M,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){e.types.push(M),k(a+"."+M,function(){F()})},getInline:function(i,s){if(F(),i.src){var n=e.st.inline,o=t(i.src);if(o.length){var r=o[0].parentNode;r&&r.tagName&&(P||(I=n.hiddenClass,P=C(I),I="mfp-"+I),E=o.after(P).detach().removeClass(I)),e.updateStatus("ready")}else e.updateStatus("error",n.tNotFound),o=t("<div>");return i.inlineElement=o,o}return e.updateStatus("ready"),e._parseMarkup(s,{},i),s}}});var N,B="ajax",O=function(){N&&t(document.body).removeClass(N)},L=function(){O(),e.req&&e.req.abort()};t.magnificPopup.registerModule(B,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){e.types.push(B),N=e.st.ajax.cursor,k(a+"."+B,L),k("BeforeChange."+B,L)},getAjax:function(i){N&&t(document.body).addClass(N),e.updateStatus("loading");var s=t.extend({url:i.src,success:function(s,n,o){var r={data:s,xhr:o};T("ParseAjax",r),e.appendContent(t(r.data),B),i.finished=!0,O(),e._setFocus(),setTimeout(function(){e.wrap.addClass(m)},16),e.updateStatus("ready"),T("AjaxContentAdded")},error:function(){O(),i.finished=i.loadError=!0,e.updateStatus("error",e.st.ajax.tError.replace("%url%",i.src))}},e.st.ajax.settings);return e.req=t.ajax(s),""}}});var A,H=function(i){if(i.data&&i.data.title!==undefined)return i.data.title;var s=e.st.image.titleSrc;if(s){if(t.isFunction(s))return s.call(e,i);if(i.el)return i.el.attr(s)||""}return""};t.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var i=e.st.image,s=".image";e.types.push("image"),k(p+s,function(){"image"===e.currItem.type&&i.cursor&&t(document.body).addClass(i.cursor)}),k(a+s,function(){i.cursor&&t(document.body).removeClass(i.cursor),_.off("resize"+f)}),k("Resize"+s,e.resizeImage),e.isLowIE&&k("AfterChange",e.resizeImage)},resizeImage:function(){var t=e.currItem;if(t&&t.img&&e.st.image.verticalFit){var i=0;e.isLowIE&&(i=parseInt(t.img.css("padding-top"),10)+parseInt(t.img.css("padding-bottom"),10)),t.img.css("max-height",e.wH-i)}},_onImageHasSize:function(t){t.img&&(t.hasSize=!0,A&&clearInterval(A),t.isCheckingImgSize=!1,T("ImageHasSize",t),t.imgHidden&&(e.content&&e.content.removeClass("mfp-loading"),t.imgHidden=!1))},findImageSize:function(t){var i=0,s=t.img[0],n=function(o){A&&clearInterval(A),A=setInterval(function(){s.naturalWidth>0?e._onImageHasSize(t):(i>200&&clearInterval(A),3===++i?n(10):40===i?n(50):100===i&&n(500))},o)};n(1)},getImage:function(i,s){var n=0,o=function(){i&&(i.img[0].complete?(i.img.off(".mfploader"),i===e.currItem&&(e._onImageHasSize(i),e.updateStatus("ready")),i.hasSize=!0,i.loaded=!0,T("ImageLoadComplete")):++n<200?setTimeout(o,100):r())},r=function(){i&&(i.img.off(".mfploader"),i===e.currItem&&(e._onImageHasSize(i),e.updateStatus("error",a.tError.replace("%url%",i.src))),i.hasSize=!0,i.loaded=!0,i.loadError=!0)},a=e.st.image,l=s.find(".mfp-img");if(l.length){var c=document.createElement("img");c.className="mfp-img",
i.el&&i.el.find("img").length&&(c.alt=i.el.find("img").attr("alt")),i.img=t(c).on("load.mfploader",o).on("error.mfploader",r),c.src=i.src,l.is("img")&&(i.img=i.img.clone()),(c=i.img[0]).naturalWidth>0?i.hasSize=!0:c.width||(i.hasSize=!1)}return e._parseMarkup(s,{title:H(i),img_replaceWith:i.img},i),e.resizeImage(),i.hasSize?(A&&clearInterval(A),i.loadError?(s.addClass("mfp-loading"),e.updateStatus("error",a.tError.replace("%url%",i.src))):(s.removeClass("mfp-loading"),e.updateStatus("ready")),s):(e.updateStatus("loading"),i.loading=!0,i.hasSize||(i.imgHidden=!0,s.addClass("mfp-loading"),e.findImageSize(i)),s)}}});var D,z=function(){return D===undefined&&(D=document.createElement("p").style.MozTransform!==undefined),D};t.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(t){return t.is("img")?t:t.find("img")}},proto:{initZoom:function(){var t,i=e.st.zoom,s=".zoom";if(i.enabled&&e.supportsTransition){var n,o,r=i.duration,c=function(t){var e=t.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),s="all "+i.duration/1e3+"s "+i.easing,n={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},o="transition";return n["-webkit-"+o]=n["-moz-"+o]=n["-o-"+o]=n[o]=s,e.css(n),e},u=function(){e.content.css("visibility","visible")};k("BuildControls"+s,function(){if(e._allowZoom()){if(clearTimeout(n),e.content.css("visibility","hidden"),!(t=e._getItemToZoom()))return void u();(o=c(t)).css(e._getOffset()),e.wrap.append(o),n=setTimeout(function(){o.css(e._getOffset(!0)),n=setTimeout(function(){u(),setTimeout(function(){o.remove(),t=o=null,T("ZoomAnimationEnded")},16)},r)},16)}}),k(l+s,function(){if(e._allowZoom()){if(clearTimeout(n),e.st.removalDelay=r,!t){if(!(t=e._getItemToZoom()))return;o=c(t)}o.css(e._getOffset(!0)),e.wrap.append(o),e.content.css("visibility","hidden"),setTimeout(function(){o.css(e._getOffset())},16)}}),k(a+s,function(){e._allowZoom()&&(u(),o&&o.remove(),t=null)})}},_allowZoom:function(){return"image"===e.currItem.type},_getItemToZoom:function(){return!!e.currItem.hasSize&&e.currItem.img},_getOffset:function(i){var s,n=(s=i?e.currItem.img:e.st.zoom.opener(e.currItem.el||e.currItem)).offset(),o=parseInt(s.css("padding-top"),10),r=parseInt(s.css("padding-bottom"),10);n.top-=t(window).scrollTop()-o;var a={width:s.width(),height:(b?s.innerHeight():s[0].offsetHeight)-r-o};return z()?a["-moz-transform"]=a.transform="translate("+n.left+"px,"+n.top+"px)":(a.left=n.left,a.top=n.top),a}}});var $="iframe",R="//about:blank",V=function(t){if(e.currTemplate[$]){var i=e.currTemplate[$].find("iframe");i.length&&(t||(i[0].src=R),e.isIE8&&i.css("display",t?"block":"none"))}};t.magnificPopup.registerModule($,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){e.types.push($),k("BeforeChange",function(t,e,i){e!==i&&(e===$?V():i===$&&V(!0))}),k(a+"."+$,function(){V()})},getIframe:function(i,s){var n=i.src,o=e.st.iframe;t.each(o.patterns,function(){if(n.indexOf(this.index)>-1)return this.id&&(n="string"==typeof this.id?n.substr(n.lastIndexOf(this.id)+this.id.length,n.length):this.id.call(this,n)),n=this.src.replace("%id%",n),!1});var r={};return o.srcAction&&(r[o.srcAction]=n),e._parseMarkup(s,r,i),e.updateStatus("ready"),s}}});var W=function(t){var i=e.items.length;return t>i-1?t-i:t<0?i+t:t},U=function(t,e,i){return t.replace(/%curr%/gi,e+1).replace(/%total%/gi,i)};t.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var i=e.st.gallery,n=".mfp-gallery";if(e.direction=!0,!i||!i.enabled)return!1;o+=" mfp-gallery",k(p+n,function(){i.navigateByImgClick&&e.wrap.on("click"+n,".mfp-img",function(){if(e.items.length>1)return e.next(),!1}),s.on("keydown"+n,function(t){37===t.keyCode?e.prev():39===t.keyCode&&e.next()})}),k("UpdateStatus"+n,function(t,i){i.text&&(i.text=U(i.text,e.currItem.index,e.items.length))}),k(h+n,function(t,s,n,o){var r=e.items.length;n.counter=r>1?U(i.tCounter,o.index,r):""}),k("BuildControls"+n,function(){if(e.items.length>1&&i.arrows&&!e.arrowLeft){var s=i.arrowMarkup,n=e.arrowLeft=t(s.replace(/%title%/gi,i.tPrev).replace(/%dir%/gi,"left")).addClass(y),o=e.arrowRight=t(s.replace(/%title%/gi,i.tNext).replace(/%dir%/gi,"right")).addClass(y);n.click(function(){e.prev()}),o.click(function(){e.next()}),e.container.append(n.add(o))}}),k(d+n,function(){e._preloadTimeout&&clearTimeout(e._preloadTimeout),e._preloadTimeout=setTimeout(function(){e.preloadNearbyImages(),e._preloadTimeout=null},16)}),k(a+n,function(){s.off(n),e.wrap.off("click"+n),e.arrowRight=e.arrowLeft=null})},next:function(){e.direction=!0,e.index=W(e.index+1),e.updateItemHTML()},prev:function(){e.direction=!1,e.index=W(e.index-1),e.updateItemHTML()},goTo:function(t){e.direction=t>=e.index,e.index=t,e.updateItemHTML()},preloadNearbyImages:function(){var t,i=e.st.gallery.preload,s=Math.min(i[0],e.items.length),n=Math.min(i[1],e.items.length);for(t=1;t<=(e.direction?n:s);t++)e._preloadItem(e.index+t);for(t=1;t<=(e.direction?s:n);t++)e._preloadItem(e.index-t)},_preloadItem:function(i){if(i=W(i),!e.items[i].preloaded){var s=e.items[i];s.parsed||(s=e.parseEl(i)),T("LazyLoad",s),"image"===s.type&&(s.img=t('<img class="mfp-img" />').on("load.mfploader",function(){s.hasSize=!0}).on("error.mfploader",function(){s.hasSize=!0,s.loadError=!0,T("LazyLoadError",s)}).attr("src",s.src)),s.preloaded=!0}}}});var K="retina";t.magnificPopup.registerModule(K,{options:{replaceSrc:function(t){return t.src.replace(/\.\w+$/,function(t){return"@2x"+t})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var t=e.st.retina,i=t.ratio;(i=isNaN(i)?i():i)>1&&(k("ImageHasSize."+K,function(t,e){e.img.css({"max-width":e.img[0].naturalWidth/i,width:"100%"})}),k("ElementParse."+K,function(e,s){s.src=t.replaceSrc(s,i)}))}}}}),x()}),document.createElement("video"),document.createElement("audio"),document.createElement("track");var vjs=function(t,e,i){var s;if("string"==typeof t){if(0===t.indexOf("#")&&(t=t.slice(1)),vjs.players[t])return vjs.players[t];s=vjs.el(t)}else s=t;if(!s||!s.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");return s.player||new vjs.Player(s,e,i)},videojs=vjs;window.videojs=window.vjs=vjs,vjs.CDN_VERSION="4.3",vjs.ACCESS_PROTOCOL="https:"==document.location.protocol?"https://":"http://",vjs.options={techOrder:["html5","flash"],html5:{},flash:{},width:300,height:150,defaultVolume:0,children:{mediaLoader:{},posterImage:{},textTrackDisplay:{},loadingSpinner:{},bigPlayButton:{},controlBar:{}},notSupportedMessage:'Sorry, no compatible source and playback technology were found for this video. Try using another browser like <a href="http://bit.ly/ccMUEC">Chrome</a> or download the latest <a href="http://adobe.ly/mwfN1">Adobe Flash Player</a>.'},"GENERATED_CDN_VSN"!==vjs.CDN_VERSION&&(videojs.options.flash.swf=vjs.ACCESS_PROTOCOL+"vjs.zencdn.net/"+vjs.CDN_VERSION+"/video-js.swf"),vjs.players={},vjs.CoreObject=vjs.CoreObject=function(){},vjs.CoreObject.extend=function(t){var e,i;for(var s in e=(t=t||{}).init||t.init||this.prototype.init||this.prototype.init||function(){},(i=function(){e.apply(this,arguments)}).prototype=vjs.obj.create(this.prototype),i.prototype.constructor=i,i.extend=vjs.CoreObject.extend,i.create=vjs.CoreObject.create,t)t.hasOwnProperty(s)&&(i.prototype[s]=t[s]);return i},vjs.CoreObject.create=function(){var t=vjs.obj.create(this.prototype);return this.apply(t,arguments),t},vjs.on=function(t,e,i){var s=vjs.getData(t);s.handlers||(s.handlers={}),s.handlers[e]||(s.handlers[e]=[]),i.guid||(i.guid=vjs.guid++),s.handlers[e].push(i),s.dispatcher||(s.disabled=!1,s.dispatcher=function(e){if(!s.disabled){e=vjs.fixEvent(e);var i=s.handlers[e.type];if(i)for(var n=i.slice(0),o=0,r=n.length;o<r&&!e.isImmediatePropagationStopped();o++)n[o].call(t,e)}}),1==s.handlers[e].length&&(document.addEventListener?t.addEventListener(e,s.dispatcher,!1):document.attachEvent&&t.attachEvent("on"+e,s.dispatcher))},vjs.off=function(t,e,i){if(vjs.hasData(t)){var s=vjs.getData(t);if(s.handlers){var n=function(e){s.handlers[e]=[],vjs.cleanUpEvents(t,e)};if(e){var o=s.handlers[e];if(o)if(i){if(i.guid)for(var r=0;r<o.length;r++)o[r].guid===i.guid&&o.splice(r--,1);vjs.cleanUpEvents(t,e)}else n(e)}else for(var a in s.handlers)n(a)}}},vjs.cleanUpEvents=function(t,e){var i=vjs.getData(t);0===i.handlers[e].length&&(delete i.handlers[e],document.removeEventListener?t.removeEventListener(e,i.dispatcher,!1):document.detachEvent&&t.detachEvent("on"+e,i.dispatcher)),vjs.isEmpty(i.handlers)&&(delete i.handlers,delete i.dispatcher,delete i.disabled),vjs.isEmpty(i)&&vjs.removeData(t)},vjs.fixEvent=function(t){function e(){return!0}function i(){return!1}if(!t||!t.isPropagationStopped){var s=t||window.event;for(var n in t={},s)"layerX"!==n&&"layerY"!==n&&(t[n]=s[n]);if(t.target||(t.target=t.srcElement||document),t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement,t.preventDefault=function(){s.preventDefault&&s.preventDefault(),t.returnValue=!1,t.isDefaultPrevented=e},t.isDefaultPrevented=i,t.stopPropagation=function(){s.stopPropagation&&s.stopPropagation(),t.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=i,t.stopImmediatePropagation=function(){s.stopImmediatePropagation&&s.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=i,null!=t.clientX){var o=document.documentElement,r=document.body;t.pageX=t.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),t.pageY=t.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}t.which=t.charCode||t.keyCode,null!=t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t},vjs.trigger=function(t,e){var i=vjs.hasData(t)?vjs.getData(t):{},s=t.parentNode||t.ownerDocument;if("string"==typeof e&&(e={type:e,target:t}),e=vjs.fixEvent(e),i.dispatcher&&i.dispatcher.call(t,e),s&&!e.isPropagationStopped()&&!1!==e.bubbles)vjs.trigger(s,e);else if(!s&&!e.isDefaultPrevented()){var n=vjs.getData(e.target);e.target[e.type]&&(n.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),n.disabled=!1)}return!e.isDefaultPrevented()},vjs.one=function(t,e,i){var s=function(){vjs.off(t,e,s),i.apply(this,arguments)};s.guid=i.guid=i.guid||vjs.guid++,vjs.on(t,e,s)};var hasOwnProp=Object.prototype.hasOwnProperty;vjs.createEl=function(t,e){var i,s;for(s in i=document.createElement(t||"div"),e)hasOwnProp.call(e,s)&&(-1!==s.indexOf("aria-")||"role"==s?i.setAttribute(s,e[s]):i[s]=e[s]);return i},vjs.capitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},vjs.obj={},vjs.obj.create=Object.create||function(t){function e(){}return e.prototype=t,new e},vjs.obj.each=function(t,e,i){for(var s in t)hasOwnProp.call(t,s)&&e.call(i||this,s,t[s])},vjs.obj.merge=function(t,e){if(!e)return t;for(var i in e)hasOwnProp.call(e,i)&&(t[i]=e[i]);return t},vjs.obj.deepMerge=function(t,e){var i,s,n;for(i in t=vjs.obj.copy(t),e)hasOwnProp.call(e,i)&&(s=t[i],n=e[i],vjs.obj.isPlain(s)&&vjs.obj.isPlain(n)?t[i]=vjs.obj.deepMerge(s,n):t[i]=e[i]);return t},vjs.obj.copy=function(t){return vjs.obj.merge({},t)},vjs.obj.isPlain=function(t){return!!t&&"object"==typeof t&&"[object Object]"===t.toString()&&t.constructor===Object},vjs.bind=function(t,e,i){e.guid||(e.guid=vjs.guid++);var s=function(){return e.apply(t,arguments)};return s.guid=i?i+"_"+e.guid:e.guid,s},vjs.cache={},vjs.guid=1,vjs.expando="vdata"+(new Date).getTime(),vjs.getData=function(t){var e=t[vjs.expando];return e||(e=t[vjs.expando]=vjs.guid++,vjs.cache[e]={}),vjs.cache[e]},vjs.hasData=function(t){var e=t[vjs.expando];return!(!e||vjs.isEmpty(vjs.cache[e]))},vjs.removeData=function(t){var e=t[vjs.expando];if(e){delete vjs.cache[e];try{delete t[vjs.expando]}catch(i){t.removeAttribute?t.removeAttribute(vjs.expando):t[vjs.expando]=null}}},vjs.isEmpty=function(t){for(var e in t)if(null!==t[e])return!1;return!0},vjs.addClass=function(t,e){-1==(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className=""===t.className?e:t.className+" "+e)},vjs.removeClass=function(t,e){var i,s;if(-1!=t.className.indexOf(e)){for(s=(i=t.className.split(" ")).length-1;s>=0;s--)i[s]===e&&i.splice(s,1);t.className=i.join(" ")}},vjs.TEST_VID=vjs.createEl("video"),vjs.USER_AGENT=navigator.userAgent,vjs.IS_IPHONE=/iPhone/i.test(vjs.USER_AGENT),vjs.IS_IPAD=/iPad/i.test(vjs.USER_AGENT),vjs.IS_IPOD=/iPod/i.test(vjs.USER_AGENT),vjs.IS_IOS=vjs.IS_IPHONE||vjs.IS_IPAD||vjs.IS_IPOD,vjs.IOS_VERSION=function(){var t=vjs.USER_AGENT.match(/OS (\d+)_/i);if(t&&t[1])return t[1]}(),vjs.IS_ANDROID=/Android/i.test(vjs.USER_AGENT),vjs.ANDROID_VERSION=function(){var t,e,i=vjs.USER_AGENT.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);return i?(t=i[1]&&parseFloat(i[1]),e=i[2]&&parseFloat(i[2]),t&&e?parseFloat(i[1]+"."+i[2]):t||null):null}(),vjs.IS_OLD_ANDROID=vjs.IS_ANDROID&&/webkit/i.test(vjs.USER_AGENT)&&vjs.ANDROID_VERSION<2.3,vjs.IS_FIREFOX=/Firefox/i.test(vjs.USER_AGENT),vjs.IS_CHROME=/Chrome/i.test(vjs.USER_AGENT),vjs.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),vjs.getAttributeValues=function(t){var e,i,s,n,o;if(e={},i=",autoplay,controls,loop,muted,default,",t&&t.attributes&&t.attributes.length>0)for(var r=(s=t.attributes).length-1;r>=0;r--)n=s[r].name,o=s[r].value,"boolean"!=typeof t[n]&&-1===i.indexOf(","+n+",")||(o=null!==o),e[n]=o;return e},vjs.getComputedDimension=function(t,e){var i="";return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,"").getPropertyValue(e):t.currentStyle&&(i=t["client"+e.substr(0,1).toUpperCase()+e.substr(1)]+"px"),i},vjs.insertFirst=function(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)},vjs.support={},vjs.el=function(t){return 0===t.indexOf("#")&&(t=t.slice(1)),document.getElementById(t)},vjs.formatTime=function(t,e){e=e||t;var i=Math.floor(t%60),s=Math.floor(t/60%60),n=Math.floor(t/3600),o=Math.floor(e/60%60),r=Math.floor(e/3600);return(isNaN(t)||t===Infinity)&&(n=s=i="-"),(n=n>0||r>0?n+":":"")+(s=((n||o>=10)&&s<10?"0"+s:s)+":")+(i=i<10?"0"+i:i)},vjs.blockTextSelection=function(){document.body.focus(),document.onselectstart=function(){return!1}},vjs.unblockTextSelection=function(){document.onselectstart=function(){return!0}},vjs.trim=function(t){return(t+"").replace(/^\s+|\s+$/g,"")},vjs.round=function(t,e){return e||(e=0),Math.round(t*Math.pow(10,e))/Math.pow(10,e)},vjs.createTimeRange=function(t,e){return{length:1,start:function(){return t},end:function(){return e}}},vjs.get=function(t,e,i){var s,n;"undefined"==typeof XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(i){}throw new Error("This browser does not support XMLHttpRequest.")}),n=new XMLHttpRequest;try{n.open("GET",t)}catch(o){i(o)}s=0===t.indexOf("file:")||0===window.location.href.indexOf("file:")&&-1===t.indexOf("http"),n.onreadystatechange=function(){4===n.readyState&&(200===n.status||s&&0===n.status?e(n.responseText):i&&i())};try{n.send()}catch(o){i&&i(o)}},vjs.setLocalStorage=function(t,e){try{var i=window.localStorage||!1;if(!i)return;i[t]=e}catch(s){22==s.code||1014==s.code?vjs.log("LocalStorage Full (VideoJS)",s):18==s.code?vjs.log("LocalStorage not allowed (VideoJS)",s):vjs.log("LocalStorage Error (VideoJS)",s)}},vjs.getAbsoluteURL=function(t){return t.match(/^https?:\/\//)||(t=vjs.createEl("div",{innerHTML:'<a href="'+t+'">x</a>'}).firstChild.href),t},vjs.log=function(){vjs.log.history=vjs.log.history||[],vjs.log.history.push(arguments),window.console&&window.console.log(Array.prototype.slice.call(arguments))},vjs.findPosition=function(t){var e,i,s,n,o,r,a,l;return t.getBoundingClientRect&&t.parentNode&&(e=t.getBoundingClientRect()),e?(i=document.documentElement,s=document.body,n=i.clientLeft||s.clientLeft||0,o=window.pageXOffset||s.scrollLeft,r=e.left+o-n,a=i.clientTop||s.clientTop||0,l=window.pageYOffset||s.scrollTop,{left:r,top:e.top+l-a}):{left:0,top:0}},vjs.Component=vjs.CoreObject.extend({init:function(t,e,i){this.player_=t,this.options_=vjs.obj.copy(this.options_),e=this.options(e),this.id_=e.id||(e.el&&e.el.id?e.el.id:t.id()+"_component_"+vjs.guid++),this.name_=e.name||null,this.el_=e.el||this.createEl(),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.initChildren(),this.ready(i)}}),vjs.Component.prototype.dispose=function(){if(this.trigger("dispose"),this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.off(),this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),vjs.removeData(this.el_),this.el_=null},vjs.Component.prototype.player_=!0,vjs.Component.prototype.player=function(){return this.player_},vjs.Component.prototype.options_,vjs.Component.prototype.options=function(t){return t===undefined?this.options_:this.options_=vjs.obj.deepMerge(this.options_,t)},vjs.Component.prototype.el_,vjs.Component.prototype.createEl=function(t,e){return vjs.createEl(t,e)},vjs.Component.prototype.el=function(){return this.el_},vjs.Component.prototype.contentEl_,vjs.Component.prototype.contentEl=function(){return this.contentEl_||this.el_},vjs.Component.prototype.id_,vjs.Component.prototype.id=function(){return this.id_},vjs.Component.prototype.name_,vjs.Component.prototype.name=function(){return this.name_},vjs.Component.prototype.children_,vjs.Component.prototype.children=function(){return this.children_},vjs.Component.prototype.childIndex_,vjs.Component.prototype.getChildById=function(t){return this.childIndex_[t]},vjs.Component.prototype.childNameIndex_,vjs.Component.prototype.getChild=function(t){return this.childNameIndex_[t]},vjs.Component.prototype.addChild=function(t,e){var i,s,n;return"string"==typeof t?(n=t,s=(e=e||{}).componentClass||vjs.capitalize(n),e.name=n,i=new window.videojs[s](this.player_||this,e)):i=t,this.children_.push(i),"function"==typeof i.id&&(this.childIndex_[i.id()]=i),(n=n||i.name&&i.name())&&(this.childNameIndex_[n]=i),"function"==typeof i.el&&i.el()&&this.contentEl().appendChild(i.el()),i},vjs.Component.prototype.removeChild=function(t){if("string"==typeof t&&(t=this.getChild(t)),t&&this.children_){for(var e=!1,i=this.children_.length-1;i>=0;i--)if(this.children_[i]===t){e=!0,this.children_.splice(i,1);break}if(e){this.childIndex_[t.id]=null,this.childNameIndex_[t.name]=null;var s=t.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},vjs.Component.prototype.initChildren=function(){var t=this.options_;if(t&&t.children){var e=this;vjs.obj.each(t.children,function(t,i){if(!1!==i){var s=function(){e[t]=e.addChild(t,i)};i.loadEvent||s()}})}},vjs.Component.prototype.buildCSSClass=function(){return""},vjs.Component.prototype.on=function(t,e){return vjs.on(this.el_,t,vjs.bind(this,e)),this},vjs.Component.prototype.off=function(t,e){return vjs.off(this.el_,t,e),this},vjs.Component.prototype.one=function(t,e){return vjs.one(this.el_,t,vjs.bind(this,e)),this},vjs.Component.prototype.trigger=function(t,e){return vjs.trigger(this.el_,t,e),this},vjs.Component.prototype.isReady_,vjs.Component.prototype.isReadyOnInitFinish_=!0,vjs.Component.prototype.readyQueue_,vjs.Component.prototype.ready=function(t){return t&&(this.isReady_?t.call(this):(this.readyQueue_===undefined&&(this.readyQueue_=[]),this.readyQueue_.push(t))),this},vjs.Component.prototype.triggerReady=function(){this.isReady_=!0;var t=this.readyQueue_;if(t&&t.length>0){for(var e=0,i=t.length;e<i;e++)t[e].call(this);this.readyQueue_=[],this.trigger("ready")}},vjs.Component.prototype.addClass=function(t){return vjs.addClass(this.el_,t),this},vjs.Component.prototype.removeClass=function(t){return vjs.removeClass(this.el_,t),this},vjs.Component.prototype.show=function(){return this.el_.style.display="block",this},vjs.Component.prototype.hide=function(){return this.el_.style.display="none",this},vjs.Component.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},vjs.Component.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},vjs.Component.prototype.disable=function(){this.hide(),this.show=function(){}},vjs.Component.prototype.width=function(t,e){return this.dimension("width",t,e)},vjs.Component.prototype.height=function(t,e){return this.dimension("height",t,e)},vjs.Component.prototype.dimensions=function(t,e){return this.width(t,!0).height(e)},vjs.Component.prototype.dimension=function(t,e,i){if(e!==undefined)return-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[t]=e:this.el_.style[t]="auto"===e?"":e+"px",i||this.trigger("resize"),this;if(!this.el_)return 0;var s=this.el_.style[t],n=s.indexOf("px");return-1!==n?parseInt(s.slice(0,n),10):parseInt(this.el_["offset"+vjs.capitalize(t)],10)},vjs.Component.prototype.onResize,vjs.Component.prototype.emitTapEvents=function(){var t,e,i;t=0,this.on("touchstart",function(){t=(new Date).getTime(),e=!0}),i=function(){e=!1},this.on("touchmove",i),this.on("touchleave",i),this.on("touchcancel",i),this.on("touchend",function(){!0===e&&(new Date).getTime()-t<250&&this.trigger("tap")})},vjs.Button=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e);var i=!1;this.on("touchstart",function(t){t.preventDefault(),i=!0}),this.on("touchmove",function(){i=!1});var s=this;this.on("touchend",function(t){i&&s.onClick(t),t.preventDefault()}),this.on("click",this.onClick),this.on("focus",this.onFocus),this.on("blur",this.onBlur)}}),vjs.Button.prototype.createEl=function(t,e){return e=vjs.obj.merge({className:this.buildCSSClass(),innerHTML:'<div class="vjs-control-content"><span class="vjs-control-text">'+(this.buttonText||"Need Text")+"</span></div>",role:"button","aria-live":"polite",tabIndex:0},e),vjs.Component.prototype.createEl.call(this,t,e)},vjs.Button.prototype.buildCSSClass=function(){return"vjs-control "+vjs.Component.prototype.buildCSSClass.call(this)},vjs.Button.prototype.onClick=function(){},vjs.Button.prototype.onFocus=function(){vjs.on(document,"keyup",vjs.bind(this,this.onKeyPress))},vjs.Button.prototype.onKeyPress=function(t){32!=t.which&&13!=t.which||(t.preventDefault(),this.onClick())},vjs.Button.prototype.onBlur=function(){vjs.off(document,"keyup",vjs.bind(this,this.onKeyPress))},vjs.Slider=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e),this.bar=this.getChild(this.options_.barName),this.handle=this.getChild(this.options_.handleName),t.on(this.playerEvent,vjs.bind(this,this.update)),this.on("mousedown",this.onMouseDown),this.on("touchstart",this.onMouseDown),this.on("focus",this.onFocus),this.on("blur",this.onBlur),this.on("click",this.onClick),this.player_.on("controlsvisible",vjs.bind(this,this.update)),t.ready(vjs.bind(this,this.update)),this.boundEvents={}}}),vjs.Slider.prototype.createEl=function(t,e){return(e=e||{}).className=e.className+" vjs-slider",e=vjs.obj.merge({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},e),vjs.Component.prototype.createEl.call(this,t,e)},vjs.Slider.prototype.onMouseDown=function(t){t.preventDefault(),vjs.blockTextSelection(),this.boundEvents.move=vjs.bind(this,this.onMouseMove),this.boundEvents.end=vjs.bind(this,this.onMouseUp),vjs.on(document,"mousemove",this.boundEvents.move),vjs.on(document,"mouseup",this.boundEvents.end),vjs.on(document,"touchmove",this.boundEvents.move),vjs.on(document,"touchend",this.boundEvents.end),this.onMouseMove(t)},vjs.Slider.prototype.onMouseUp=function(){vjs.unblockTextSelection(),vjs.off(document,"mousemove",this.boundEvents.move,!1),vjs.off(document,"mouseup",this.boundEvents.end,!1),vjs.off(document,"touchmove",this.boundEvents.move,!1),vjs.off(document,"touchend",this.boundEvents.end,!1),this.update()},vjs.Slider.prototype.update=function(){if(this.el_){var t,e=this.getPercent(),i=this.handle,s=this.bar;if(isNaN(e)&&(e=0),t=e,i){var n=this.el_.offsetWidth,o=i.el().offsetWidth,r=o?o/n:0,a=e*(1-r);t=a+r/2,i.el().style.left=vjs.round(100*a,2)+"%"}s.el().style.width=vjs.round(100*t,2)+"%"}},vjs.Slider.prototype.calculateDistance=function(t){var e,i,s,n,o,r,a,l,c;if(e=this.el_,i=vjs.findPosition(e),o=r=e.offsetWidth,a=this.handle,this.options_.vertical){if(n=i.top,c=t.changedTouches?t.changedTouches[0].pageY:t.pageY,a){var u=a.el().offsetHeight;n+=u/2,r-=u}return Math.max(0,Math.min(1,(n-c+r)/r))}if(s=i.left,l=t.changedTouches?t.changedTouches[0].pageX:t.pageX,a){var h=a.el().offsetWidth;s+=h/2,o-=h}return Math.max(0,Math.min(1,(l-s)/o))},vjs.Slider.prototype.onFocus=function(){vjs.on(document,"keyup",vjs.bind(this,this.onKeyPress))},vjs.Slider.prototype.onKeyPress=function(t){37==t.which?(t.preventDefault(),this.stepBack()):39==t.which&&(t.preventDefault(),this.stepForward())},vjs.Slider.prototype.onBlur=function(){vjs.off(document,"keyup",vjs.bind(this,this.onKeyPress))},vjs.Slider.prototype.onClick=function(t){t.stopImmediatePropagation(),t.preventDefault()},vjs.SliderHandle=vjs.Component.extend(),vjs.SliderHandle.prototype.defaultValue=0,vjs.SliderHandle.prototype.createEl=function(t,e){return(e=e||{}).className=e.className+" vjs-slider-handle",e=vjs.obj.merge({innerHTML:'<span class="vjs-control-text">'+this.defaultValue+"</span>"},e),vjs.Component.prototype.createEl.call(this,"div",e)},vjs.Menu=vjs.Component.extend(),vjs.Menu.prototype.addItem=function(t){this.addChild(t),t.on("click",vjs.bind(this,function(){this.unlockShowing()}))},vjs.Menu.prototype.createEl=function(){var t=this.options().contentElType||"ul";this.contentEl_=vjs.createEl(t,{className:"vjs-menu-content"});var e=vjs.Component.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return e.appendChild(this.contentEl_),vjs.on(e,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),e},vjs.MenuItem=vjs.Button.extend({init:function(t,e){vjs.Button.call(this,t,e),this.selected(e.selected)}}),vjs.MenuItem.prototype.createEl=function(t,e){return vjs.Button.prototype.createEl.call(this,"li",vjs.obj.merge({className:"vjs-menu-item",innerHTML:this.options_.label},e))},vjs.MenuItem.prototype.onClick=function(){this.selected(!0)},vjs.MenuItem.prototype.selected=function(t){t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-selected",!0)):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-selected",!1))},vjs.MenuButton=vjs.Button.extend({init:function(t,e){vjs.Button.call(this,t,e),this.menu=this.createMenu(),this.addChild(this.menu),this.items&&0===this.items.length&&this.hide(),this.on("keyup",this.onKeyPress),this.el_.setAttribute("aria-haspopup",!0),this.el_.setAttribute("role","button")}}),vjs.MenuButton.prototype.buttonPressed_=!1,vjs.MenuButton.prototype.createMenu=function(){var t=new vjs.Menu(this.player_);if(this.options().title&&t.el().appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.kind_),tabindex:-1})),this.items=this.createItems(),this.items)for(var e=0;e<this.items.length;e++)t.addItem(this.items[e]);return t},vjs.MenuButton.prototype.createItems=function(){},vjs.MenuButton.prototype.buildCSSClass=function(){return this.className+" vjs-menu-button "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.MenuButton.prototype.onFocus=function(){},vjs.MenuButton.prototype.onBlur=function(){},vjs.MenuButton.prototype.onClick=function(){this.one("mouseout",vjs.bind(this,function(){this.menu.unlockShowing(),this.el_.blur()})),this.buttonPressed_?this.unpressButton():this.pressButton()},vjs.MenuButton.prototype.onKeyPress=function(t){t.preventDefault(),32==t.which||13==t.which?this.buttonPressed_?this.unpressButton():this.pressButton():27==t.which&&this.buttonPressed_&&this.unpressButton()},vjs.MenuButton.prototype.pressButton=function(){this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-pressed",!0),this.items&&this.items.length>0&&this.items[0].el().focus()},vjs.MenuButton.prototype.unpressButton=function(){this.buttonPressed_=!1,this.menu.unlockShowing(),this.el_.setAttribute("aria-pressed",!1)},vjs.Player=vjs.Component.extend({init:function(t,e,i){this.tag=t,e=vjs.obj.merge(this.getTagSettings(t),e),this.cache_={},this.poster_=e.poster,this.controls_=e.controls,t.controls=!1,vjs.Component.call(this,this,e,i),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.one("play",function(t){var e={type:"firstplay",target:this.el_};vjs.trigger(this.el_,e)||(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation())}),this.on("ended",this.onEnded),this.on("play",this.onPlay),this.on("firstplay",this.onFirstPlay),this.on("pause",this.onPause),this.on("progress",this.onProgress),this.on("durationchange",this.onDurationChange),this.on("error",this.onError),this.on("fullscreenchange",this.onFullscreenChange),vjs.players[this.id_]=this,e.plugins&&vjs.obj.each(e.plugins,function(t,e){this[t](e)},this),this.listenForUserActivity()}}),vjs.Player.prototype.options_=vjs.options,vjs.Player.prototype.dispose=function(){this.trigger("dispose"),this.off("dispose"),vjs.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.stopTrackingProgress(),this.stopTrackingCurrentTime(),this.tech&&this.tech.dispose(),vjs.Component.prototype.dispose.call(this)},vjs.Player.prototype.getTagSettings=function(t){var e,i,s,n,o,r={sources:[],tracks:[]};if(vjs.obj.merge(r,vjs.getAttributeValues(t)),t.hasChildNodes())for(n=0,o=(e=t.childNodes).length;n<o;n++)"source"===(s=(i=e[n]).nodeName.toLowerCase())?r.sources.push(vjs.getAttributeValues(i)):"track"===s&&r.tracks.push(vjs.getAttributeValues(i));return r},vjs.Player.prototype.createEl=function(){var t=this.el_=vjs.Component.prototype.createEl.call(this,"div"),e=this.tag;if(e.removeAttribute("width"),e.removeAttribute("height"),e.hasChildNodes()){var i,s,n,o,r;for(s=(i=e.childNodes).length,r=[];s--;)"track"===(o=i[s]).nodeName.toLowerCase()&&r.push(o);for(n=0;n<r.length;n++)e.removeChild(r[n])}return e.id=e.id||"vjs_video_"+vjs.guid++,t.id=e.id,t.className=e.className,e.id+="_html5_api",e.className="vjs-tech",e.player=t.player=this,this.addClass("vjs-paused"),this.width(this.options_.width,!0),this.height(this.options_.height,!0),e.parentNode&&e.parentNode.insertBefore(t,e),vjs.insertFirst(e,t),t},vjs.Player.prototype.loadTech=function(t,e){this.tech?this.unloadTech():"Html5"!==t&&this.tag&&(vjs.Html5.disposeMediaElement(this.tag),this.tag=null),this.techName=t,this.isReady_=!1;var i=function(){this.player_.triggerReady(),this.features.progressEvents||this.player_.manualProgressOn(),this.features.timeupdateEvents||this.player_.manualTimeUpdatesOn()},s=vjs.obj.merge({source:e,parentEl:this.el_},this.options_[t.toLowerCase()]);e&&(e.src==this.cache_.src&&this.cache_.currentTime>0&&(s.startTime=this.cache_.currentTime),this.cache_.src=e.src),this.tech=new window.videojs[t](this,s),this.tech.ready(i)},vjs.Player.prototype.unloadTech=function(){this.isReady_=!1,this.tech.dispose(),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),this.tech=!1},vjs.Player.prototype.manualProgressOn=function(){this.manualProgress=!0,this.trackProgress(),this.tech.one("progress",function(){this.features.progressEvents=!0,this.player_.manualProgressOff()})},vjs.Player.prototype.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress()},vjs.Player.prototype.trackProgress=function(){this.progressInterval=setInterval(vjs.bind(this,function(){this.cache_.bufferEnd<this.buffered().end(0)?this.trigger("progress"):1==this.bufferedPercent()&&(this.stopTrackingProgress(),this.trigger("progress"))}),500)},vjs.Player.prototype.stopTrackingProgress=function(){clearInterval(this.progressInterval)},
/*! Time Tracking -------------------------------------------------------------- */
vjs.Player.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime),this.tech.one("timeupdate",function(){this.features.timeupdateEvents=!0,this.player_.manualTimeUpdatesOff()})},vjs.Player.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},vjs.Player.prototype.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=setInterval(vjs.bind(this,function(){this.trigger("timeupdate")}),250)},vjs.Player.prototype.stopTrackingCurrentTime=function(){clearInterval(this.currentTimeInterval)},vjs.Player.prototype.onLoadStart,vjs.Player.prototype.onLoadedMetaData,vjs.Player.prototype.onLoadedData,vjs.Player.prototype.onLoadedAllData,vjs.Player.prototype.onPlay=function(){vjs.removeClass(this.el_,"vjs-paused"),vjs.addClass(this.el_,"vjs-playing")},vjs.Player.prototype.onFirstPlay=function(){this.options_.starttime&&this.currentTime(this.options_.starttime),this.addClass("vjs-has-started")},vjs.Player.prototype.onPause=function(){vjs.removeClass(this.el_,"vjs-playing"),vjs.addClass(this.el_,"vjs-paused")},vjs.Player.prototype.onTimeUpdate,vjs.Player.prototype.onProgress=function(){1==this.bufferedPercent()&&this.trigger("loadedalldata")},vjs.Player.prototype.onEnded=function(){this.options_.loop&&(this.currentTime(0),this.play())},vjs.Player.prototype.onDurationChange=function(){this.duration(this.techGet("duration"))},vjs.Player.prototype.onVolumeChange,vjs.Player.prototype.onFullscreenChange=function(){this.isFullScreen?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},vjs.Player.prototype.onError=function(t){vjs.log("Video Error",t)},vjs.Player.prototype.cache_,vjs.Player.prototype.getCache=function(){return this.cache_},vjs.Player.prototype.techCall=function(t,e){if(this.tech&&!this.tech.isReady_)this.tech.ready(function(){this[t](e)});else try{this.tech[t](e)}catch(i){throw vjs.log(i),i}},vjs.Player.prototype.techGet=function(t){if(this.tech&&this.tech.isReady_)try{return this.tech[t]()}catch(e){throw this.tech[t]===undefined?vjs.log("Video.js: "+t+" method not defined for "+this.techName+" playback technology.",e):"TypeError"==e.name?(vjs.log("Video.js: "+t+" unavailable on "+this.techName+" playback technology element.",e),this.tech.isReady_=!1):vjs.log(e),e}},vjs.Player.prototype.play=function(){return this.techCall("play"),this},vjs.Player.prototype.pause=function(){return this.techCall("pause"),this},vjs.Player.prototype.paused=function(){return!1!==this.techGet("paused")},vjs.Player.prototype.currentTime=function(t){return t!==undefined?(this.cache_.lastSetCurrentTime=t,this.techCall("setCurrentTime",t),this.manualTimeUpdates&&this.trigger("timeupdate"),this):this.cache_.currentTime=this.techGet("currentTime")||0},vjs.Player.prototype.duration=function(t){return t!==undefined?(this.cache_.duration=parseFloat(t),this):(this.cache_.duration===undefined&&this.onDurationChange(),this.cache_.duration)},vjs.Player.prototype.remainingTime=function(){return this.duration()-this.currentTime()},vjs.Player.prototype.buffered=function(){var t=this.techGet("buffered"),e=0,i=t.length-1,s=this.cache_.bufferEnd=this.cache_.bufferEnd||0;return t&&i>=0&&t.end(i)!==s&&(s=t.end(i),this.cache_.bufferEnd=s),vjs.createTimeRange(e,s)},vjs.Player.prototype.bufferedPercent=function(){return this.duration()?this.buffered().end(0)/this.duration():0},vjs.Player.prototype.volume=function(t){var e;return t!==undefined?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall("setVolume",e),vjs.setLocalStorage("volume",e),this):(e=parseFloat(this.techGet("volume")),isNaN(e)?1:e)},vjs.Player.prototype.muted=function(t){return t!==undefined?(this.techCall("setMuted",t),this):this.techGet("muted")||!1},vjs.Player.prototype.supportsFullScreen=function(){return this.techGet("supportsFullScreen")||!1},vjs.Player.prototype.requestFullScreen=function(){var t=vjs.support.requestFullScreen;return this.isFullScreen=!0,t?(vjs.on(document,t.eventName,vjs.bind(this,function(){this.isFullScreen=document[t.isFullScreen],!1===this.isFullScreen&&vjs.off(document,t.eventName,arguments.callee),this.trigger("fullscreenchange")})),this.el_[t.requestFn]()):this.tech.supportsFullScreen()?this.techCall("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange")),this},vjs.Player.prototype.cancelFullScreen=function(){var t=vjs.support.requestFullScreen;return this.isFullScreen=!1,t?document[t.cancelFn]():this.tech.supportsFullScreen()?this.techCall("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange")),this},vjs.Player.prototype.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=document.documentElement.style.overflow,vjs.on(document,"keydown",vjs.bind(this,this.fullWindowOnEscKey)),document.documentElement.style.overflow="hidden",vjs.addClass(document.body,"vjs-full-window"),this.trigger("enterFullWindow")},vjs.Player.prototype.fullWindowOnEscKey=function(t){27===t.keyCode&&(!0===this.isFullScreen?this.cancelFullScreen():this.exitFullWindow())},vjs.Player.prototype.exitFullWindow=function(){this.isFullWindow=!1,vjs.off(document,"keydown",this.fullWindowOnEscKey),document.documentElement.style.overflow=this.docOrigOverflow,vjs.removeClass(document.body,"vjs-full-window"),this.trigger("exitFullWindow")},vjs.Player.prototype.selectSource=function(t){for(var e=0,i=this.options_.techOrder;e<i.length;e++){var s=vjs.capitalize(i[e]),n=window.videojs[s];if(n.isSupported())for(var o=0,r=t;o<r.length;o++){var a=r[o];if(n.canPlaySource(a))return{source:a,tech:s}}}return!1},vjs.Player.prototype.src=function(t){if(t instanceof Array){var e,i=this.selectSource(t);i?(t=i.source,(e=i.tech)==this.techName?this.src(t):this.loadTech(e,t)):this.el_.appendChild(vjs.createEl("p",{innerHTML:this.options().notSupportedMessage}))}else t instanceof Object?window.videojs[this.techName].canPlaySource(t)?this.src(t.src):this.src([t]):(this.cache_.src=t,this.isReady_?(this.techCall("src",t),"auto"==this.options_.preload&&this.load(),this.options_.autoplay&&this.play()):this.ready(function(){this.src(t)}));return this},vjs.Player.prototype.load=function(){return this.techCall("load"),this},vjs.Player.prototype.currentSrc=function(){return this.techGet("currentSrc")||this.cache_.src||""},vjs.Player.prototype.preload=function(t){return t!==undefined?(this.techCall("setPreload",t),this.options_.preload=t,this):this.techGet("preload")},vjs.Player.prototype.autoplay=function(t){return t!==undefined?(this.techCall("setAutoplay",t),this.options_.autoplay=t,this):this.techGet("autoplay",t)},vjs.Player.prototype.loop=function(t){return t!==undefined?(this.techCall("setLoop",t),this.options_.loop=t,this):this.techGet("loop")},vjs.Player.prototype.poster_,vjs.Player.prototype.poster=function(t){return t!==undefined?(this.poster_=t,this):this.poster_},vjs.Player.prototype.controls_,vjs.Player.prototype.controls=function(t){return t!==undefined?(t=!!t,this.controls_!==t&&(this.controls_=t,t?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled")):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"))),this):this.controls_},vjs.Player.prototype.usingNativeControls_,vjs.Player.prototype.usingNativeControls=function(t){return t!==undefined?(t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,t?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):this.usingNativeControls_},vjs.Player.prototype.error=function(){return this.techGet("error")},vjs.Player.prototype.ended=function(){return this.techGet("ended")},vjs.Player.prototype.seeking=function(){return this.techGet("seeking")},vjs.Player.prototype.userActivity_=!0,vjs.Player.prototype.reportUserActivity=function(){this.userActivity_=!0},vjs.Player.prototype.userActive_=!0,vjs.Player.prototype.userActive=function(t){return t!==undefined?((t=!!t)!==this.userActive_&&(this.userActive_=t,t?(this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive")):(this.userActivity_=!1,this.tech.one("mousemove",function(t){t.stopPropagation(),t.preventDefault()}),this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive"))),this):this.userActive_},vjs.Player.prototype.listenForUserActivity=function(){var t,e,i,s,n,o;t=this.reportUserActivity,e=function(){t(),clearInterval(i),i=setInterval(vjs.bind(this,t),250)},s=function(){t(),clearInterval(i)},this.on("mousedown",e),this.on("mousemove",t),this.on("mouseup",s),this.on("keydown",t),this.on("keyup",t),this.on("touchstart",e),this.on("touchmove",t),this.on("touchend",s),this.on("touchcancel",s),n=setInterval(vjs.bind(this,function(){this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),clearTimeout(o),o=setTimeout(vjs.bind(this,function(){this.userActivity_||this.userActive(!1)}),2e3))}),250),this.on("dispose",function(){clearInterval(n),clearTimeout(o)})},function(){var t,e,i;e={},(i=document.createElement("div")).cancelFullscreen!==undefined?(e.requestFn="requestFullscreen",e.cancelFn="exitFullscreen",e.eventName="fullscreenchange",e.isFullScreen="fullScreen"):(document.mozCancelFullScreen?(t="moz",e.isFullScreen=t+"FullScreen"):(t="webkit",e.isFullScreen=t+"IsFullScreen"),i[t+"RequestFullScreen"]&&(e.requestFn=t+"RequestFullScreen",e.cancelFn=t+"CancelFullScreen"),e.eventName=t+"fullscreenchange"),document[e.cancelFn]&&(vjs.support.requestFullScreen=e)}(),vjs.ControlBar=vjs.Component.extend(),vjs.ControlBar.prototype.options_={loadEvent:"play",children:{playToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},progressControl:{},fullscreenToggle:{},volumeControl:{},muteToggle:{}}},vjs.ControlBar.prototype.createEl=function(){return vjs.createEl("div",{className:"vjs-control-bar"})},vjs.PlayToggle=vjs.Button.extend({init:function(t,e){vjs.Button.call(this,t,e),t.on("play",vjs.bind(this,this.onPlay)),t.on("pause",vjs.bind(this,this.onPause))}}),vjs.PlayToggle.prototype.buttonText="Play",vjs.PlayToggle.prototype.buildCSSClass=function(){return"vjs-play-control "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.PlayToggle.prototype.onClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},vjs.PlayToggle.prototype.onPlay=function(){vjs.removeClass(this.el_,"vjs-paused"),vjs.addClass(this.el_,"vjs-playing"),this.el_.children[0].children[0].innerHTML="Pause"},vjs.PlayToggle.prototype.onPause=function(){vjs.removeClass(this.el_,"vjs-playing"),vjs.addClass(this.el_,"vjs-paused"),this.el_.children[0].children[0].innerHTML="Play"},vjs.CurrentTimeDisplay=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e),t.on("timeupdate",vjs.bind(this,this.updateContent))}}),vjs.CurrentTimeDisplay.prototype.createEl=function(){var t=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-current-time vjs-time-controls vjs-control"});return this.content=vjs.createEl("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00',"aria-live":"off"}),t.appendChild(vjs.createEl("div").appendChild(this.content)),t},vjs.CurrentTimeDisplay.prototype.updateContent=function(){var t=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.content.innerHTML='<span class="vjs-control-text">Current Time </span>'+vjs.formatTime(t,this.player_.duration())},vjs.DurationDisplay=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e),t.on("timeupdate",vjs.bind(this,this.updateContent))}}),vjs.DurationDisplay.prototype.createEl=function(){var t=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-controls vjs-control"});return this.content=vjs.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">Duration Time </span>0:00',"aria-live":"off"}),t.appendChild(vjs.createEl("div").appendChild(this.content)),t},vjs.DurationDisplay.prototype.updateContent=function(){var t=this.player_.duration();t&&(this.content.innerHTML='<span class="vjs-control-text">Duration Time </span>'+vjs.formatTime(t))},vjs.TimeDivider=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e)}}),vjs.TimeDivider.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},vjs.RemainingTimeDisplay=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e),t.on("timeupdate",vjs.bind(this,this.updateContent))}}),vjs.RemainingTimeDisplay.prototype.createEl=function(){var t=vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});return this.content=vjs.createEl("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">Remaining Time </span>-0:00',"aria-live":"off"}),t.appendChild(vjs.createEl("div").appendChild(this.content)),t},vjs.RemainingTimeDisplay.prototype.updateContent=function(){this.player_.duration()&&(this.content.innerHTML='<span class="vjs-control-text">Remaining Time </span>-'+vjs.formatTime(this.player_.remainingTime()))},vjs.FullscreenToggle=vjs.Button.extend({init:function(t,e){vjs.Button.call(this,t,e)}}),vjs.FullscreenToggle.prototype.buttonText="Fullscreen",vjs.FullscreenToggle.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+vjs.Button.prototype.buildCSSClass.call(this)},vjs.FullscreenToggle.prototype.onClick=function(){this.player_.isFullScreen?(this.player_.cancelFullScreen(),this.el_.children[0].children[0].innerHTML="Fullscreen"):(this.player_.requestFullScreen(),this.el_.children[0].children[0].innerHTML="Non-Fullscreen")},vjs.ProgressControl=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e)}}),vjs.ProgressControl.prototype.options_={children:{seekBar:{}}},vjs.ProgressControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},vjs.SeekBar=vjs.Slider.extend({init:function(t,e){vjs.Slider.call(this,t,e),t.on("timeupdate",vjs.bind(this,this.updateARIAAttributes)),t.ready(vjs.bind(this,this.updateARIAAttributes))}}),vjs.SeekBar.prototype.options_={children:{loadProgressBar:{},playProgressBar:{},seekHandle:{}},barName:"playProgressBar",handleName:"seekHandle"},vjs.SeekBar.prototype.playerEvent="timeupdate",vjs.SeekBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-progress-holder","aria-label":"video progress bar"})},vjs.SeekBar.prototype.updateARIAAttributes=function(){var t=this.player_.scrubbing?this.player_.getCache().currentTime:this.player_.currentTime();this.el_.setAttribute("aria-valuenow",vjs.round(100*this.getPercent(),2)),this.el_.setAttribute("aria-valuetext",vjs.formatTime(t,this.player_.duration()))},vjs.SeekBar.prototype.getPercent=function(){var t;if("Flash"===this.player_.techName&&this.player_.seeking()){var e=this.player_.getCache();t=e.lastSetCurrentTime?e.lastSetCurrentTime:this.player_.currentTime()}else t=this.player_.currentTime();return t/this.player_.duration()},vjs.SeekBar.prototype.onMouseDown=function(t){vjs.Slider.prototype.onMouseDown.call(this,t),this.player_.scrubbing=!0,this.videoWasPlaying=!this.player_.paused(),this.player_.pause()},vjs.SeekBar.prototype.onMouseMove=function(t){var e=this.calculateDistance(t)*this.player_.duration();e==this.player_.duration()&&(e-=.1),this.player_.currentTime(e)},vjs.SeekBar.prototype.onMouseUp=function(t){vjs.Slider.prototype.onMouseUp.call(this,t),this.player_.scrubbing=!1,this.videoWasPlaying&&this.player_.play()},vjs.SeekBar.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},vjs.SeekBar.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},vjs.LoadProgressBar=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e),t.on("progress",vjs.bind(this,this.update))}}),vjs.LoadProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text">Loaded: 0%</span>'})},vjs.LoadProgressBar.prototype.update=function(){this.el_.style&&(this.el_.style.width=vjs.round(100*this.player_.bufferedPercent(),2)+"%")},vjs.PlayProgressBar=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e)}}),vjs.PlayProgressBar.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text">Progress: 0%</span>'})},vjs.SeekHandle=vjs.SliderHandle.extend(),vjs.SeekHandle.prototype.defaultValue="00:00",vjs.SeekHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-seek-handle"})},vjs.VolumeControl=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e),t.tech&&t.tech.features&&!1===t.tech.features.volumeControl&&this.addClass("vjs-hidden"),t.on("loadstart",vjs.bind(this,function(){t.tech.features&&!1===t.tech.features.volumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}))}}),vjs.VolumeControl.prototype.options_={children:{volumeBar:{}}},vjs.VolumeControl.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control"})},vjs.VolumeBar=vjs.Slider.extend({init:function(t,e){vjs.Slider.call(this,t,e),t.on("volumechange",vjs.bind(this,this.updateARIAAttributes)),t.ready(vjs.bind(this,this.updateARIAAttributes)),setTimeout(vjs.bind(this,this.update),0)}}),vjs.VolumeBar.prototype.updateARIAAttributes=function(){this.el_.setAttribute("aria-valuenow",vjs.round(100*this.player_.volume(),2)),this.el_.setAttribute("aria-valuetext",vjs.round(100*this.player_.volume(),2)+"%")},vjs.VolumeBar.prototype.options_={children:{volumeLevel:{},volumeHandle:{}},barName:"volumeLevel",handleName:"volumeHandle"},vjs.VolumeBar.prototype.playerEvent="volumechange",vjs.VolumeBar.prototype.createEl=function(){return vjs.Slider.prototype.createEl.call(this,"div",{className:"vjs-volume-bar","aria-label":"volume level"})},vjs.VolumeBar.prototype.onMouseMove=function(t){this.player_.muted()&&this.player_.muted(!1),this.player_.volume(this.calculateDistance(t))},vjs.VolumeBar.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},vjs.VolumeBar.prototype.stepForward=function(){this.player_.volume(this.player_.volume()+.1)},vjs.VolumeBar.prototype.stepBack=function(){this.player_.volume(this.player_.volume()-.1)},vjs.VolumeLevel=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e)}}),vjs.VolumeLevel.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},vjs.VolumeHandle=vjs.SliderHandle.extend(),vjs.VolumeHandle.prototype.defaultValue="00:00",vjs.VolumeHandle.prototype.createEl=function(){return vjs.SliderHandle.prototype.createEl.call(this,"div",{className:"vjs-volume-handle"})},vjs.MuteToggle=vjs.Button.extend({init:function(t,e){vjs.Button.call(this,t,e),t.on("volumechange",vjs.bind(this,this.update)),t.tech&&t.tech.features&&!1===t.tech.features.volumeControl&&this.addClass("vjs-hidden"),t.on("loadstart",vjs.bind(this,function(){t.tech.features&&!1===t.tech.features.volumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")}))}}),vjs.MuteToggle.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})},vjs.MuteToggle.prototype.onClick=function(){this.player_.muted(!this.player_.muted())},vjs.MuteToggle.prototype.update=function(){var t=this.player_.volume(),e=3;0===t||this.player_.muted()?e=0:t<.33?e=1:t<.67&&(e=2),this.player_.muted()?"Unmute"!=this.el_.children[0].children[0].innerHTML&&(this.el_.children[0].children[0].innerHTML="Unmute"):"Mute"!=this.el_.children[0].children[0].innerHTML&&(this.el_.children[0].children[0].innerHTML="Mute");for(var i=0;i<4;i++)vjs.removeClass(this.el_,"vjs-vol-"+i);vjs.addClass(this.el_,"vjs-vol-"+e)},vjs.VolumeMenuButton=vjs.MenuButton.extend({init:function(t,e){vjs.MenuButton.call(this,t,e),t.on("volumechange",vjs.bind(this,this.update)),t.tech&&t.tech.features&&!1===t.tech.features.volumeControl&&this.addClass("vjs-hidden"),t.on("loadstart",vjs.bind(this,function(){t.tech.features&&!1===t.tech.features.volumeControl?this.addClass("vjs-hidden"):this.removeClass("vjs-hidden")})),this.addClass("vjs-menu-button")}}),vjs.VolumeMenuButton.prototype.createMenu=function(){var t=new vjs.Menu(this.player_,{contentElType:"div"}),e=new vjs.VolumeBar(this.player_,vjs.obj.merge({vertical:!0},this.options_.volumeBar));return t.addChild(e),t},vjs.VolumeMenuButton.prototype.onClick=function(){vjs.MuteToggle.prototype.onClick.call(this),vjs.MenuButton.prototype.onClick.call(this)},vjs.VolumeMenuButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-volume-menu-button vjs-menu-button vjs-control",innerHTML:'<div><span class="vjs-control-text">Mute</span></div>'})},vjs.VolumeMenuButton.prototype.update=vjs.MuteToggle.prototype.update,vjs.PosterImage=vjs.Button.extend({init:function(t,e){vjs.Button.call(this,t,e),t.poster()&&t.controls()||this.hide(),t.on("play",vjs.bind(this,this.hide))}}),vjs.PosterImage.prototype.createEl=function(){var t=vjs.createEl("div",{className:"vjs-poster",tabIndex:-1}),e=this.player_.poster();return e&&("backgroundSize"in t.style?t.style.backgroundImage='url("'+e+'")':t.appendChild(vjs.createEl("img",{src:e}))),t},vjs.PosterImage.prototype.onClick=function(){this.player().controls()&&this.player_.play()},vjs.LoadingSpinner=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e),t.on("canplay",vjs.bind(this,this.hide)),t.on("canplaythrough",vjs.bind(this,this.hide)),t.on("playing",vjs.bind(this,this.hide)),t.on("seeked",vjs.bind(this,this.hide)),t.on("seeking",vjs.bind(this,this.show)),t.on("seeked",vjs.bind(this,this.hide)),t.on("error",vjs.bind(this,this.show)),t.on("waiting",vjs.bind(this,this.show))}}),vjs.LoadingSpinner.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner"})},vjs.BigPlayButton=vjs.Button.extend(),vjs.BigPlayButton.prototype.createEl=function(){return vjs.Button.prototype.createEl.call(this,"div",{className:"vjs-big-play-button",innerHTML:'<span aria-hidden="true"></span>',"aria-label":"play video"})},vjs.BigPlayButton.prototype.onClick=function(){this.player_.play()},vjs.MediaTechController=vjs.Component.extend({init:function(t,e,i){vjs.Component.call(this,t,e,i),this.initControlsListeners()}}),vjs.MediaTechController.prototype.initControlsListeners=function(){var t,e,i;e=this,t=this.player();var s=function(){t.controls()&&!t.usingNativeControls()&&e.addControlsListeners()};i=vjs.bind(e,e.removeControlsListeners),this.ready(s),t.on("controlsenabled",s),t.on("controlsdisabled",i)},vjs.MediaTechController.prototype.addControlsListeners=function(){var t,e;this.on("mousedown",this.onClick),this.on("touchstart",function(t){t.preventDefault(),t.stopPropagation(),e=this.player_.userActive()}),t=function(t){t.stopPropagation(),e&&this.player_.reportUserActivity()},this.on("touchmove",t),this.on("touchleave",t),this.on("touchcancel",t),this.on("touchend",t),this.emitTapEvents(),this.on("tap",this.onTap)},vjs.MediaTechController.prototype.removeControlsListeners=function(){this.off("tap"),this.off("touchstart"),this.off("touchmove"),this.off("touchleave"),this.off("touchcancel"),this.off("touchend"),this.off("click"),this.off("mousedown")},vjs.MediaTechController.prototype.onClick=function(t){0===t.button&&this.player().controls()&&(this.player().paused()?this.player().play():this.player().pause())},vjs.MediaTechController.prototype.onTap=function(){this.player().userActive(!this.player().userActive())},vjs.MediaTechController.prototype.features={volumeControl:!0,fullscreenResize:!1,progressEvents:!1,timeupdateEvents:!1},vjs.media={},vjs.media.ApiMethods="play,pause,paused,currentTime,setCurrentTime,duration,buffered,volume,setVolume,muted,setMuted,width,height,supportsFullScreen,enterFullScreen,src,load,currentSrc,preload,setPreload,autoplay,setAutoplay,loop,setLoop,error,networkState,readyState,seeking,initialTime,startOffsetTime,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks,defaultPlaybackRate,playbackRate,mediaGroup,controller,controls,defaultMuted".split(",");for(var i=vjs.media.ApiMethods.length-1;i>=0;i--){var methodName=vjs.media.ApiMethods[i];vjs.MediaTechController.prototype[vjs.media.ApiMethods[i]]=createMethod(methodName)}vjs.Html5=vjs.MediaTechController.extend({init:function(t,e,i){this.features.volumeControl=vjs.Html5.canControlVolume(),this.features.movingMediaElementInDOM=!vjs.IS_IOS,this.features.fullscreenResize=!0,vjs.MediaTechController.call(this,t,e,i);var s=e.source;s&&this.el_.currentSrc===s.src&&this.el_.networkState>0?t.trigger("loadstart"):s&&(this.el_.src=s.src),vjs.TOUCH_ENABLED&&!1!==t.options().nativeControlsForTouch&&this.useNativeControls(),t.ready(function(){this.tag&&this.options_.autoplay&&this.paused()&&(delete this.tag.poster,this.play())}),this.setupTriggers(),this.triggerReady()}}),vjs.Html5.prototype.dispose=function(){vjs.MediaTechController.prototype.dispose.call(this)},vjs.Html5.prototype.createEl=function(){var t,e=this.player_,i=e.tag;i&&!1!==this.features.movingMediaElementInDOM||(i?(t=i.cloneNode(!1),vjs.Html5.disposeMediaElement(i),i=t,e.tag=null):i=vjs.createEl("video",{id:e.id()+"_html5_api",className:"vjs-tech"}),i.player=e,vjs.insertFirst(i,e.el()));for(var s=["autoplay","preload","loop","muted"],n=s.length-1;n>=0;n--){var o=s[n];null!==e.options_[o]&&(i[o]=e.options_[o])}return i},vjs.Html5.prototype.setupTriggers=function(){for(var t=vjs.Html5.Events.length-1;t>=0;t--)vjs.on(this.el_,vjs.Html5.Events[t],vjs.bind(this.player_,this.eventHandler))},vjs.Html5.prototype.eventHandler=function(t){this.trigger(t),t.stopPropagation()},vjs.Html5.prototype.useNativeControls=function(){var t,e,i,s,n;t=this,e=this.player(),t.setControls(e.controls()),i=function(){t.setControls(!0)},s=function(){t.setControls(!1)},e.on("controlsenabled",i),e.on("controlsdisabled",s),n=function(){e.off("controlsenabled",i),e.off("controlsdisabled",s)},t.on("dispose",n),e.on("usingcustomcontrols",n),e.usingNativeControls(!0)},vjs.Html5.prototype.play=function(){this.el_.play()},vjs.Html5.prototype.pause=function(){this.el_.pause()},vjs.Html5.prototype.paused=function(){return this.el_.paused},vjs.Html5.prototype.currentTime=function(){return this.el_.currentTime},vjs.Html5.prototype.setCurrentTime=function(t){try{this.el_.currentTime=t}catch(e){vjs.log(e,"Video is not ready. (Video.js)")}},vjs.Html5.prototype.duration=function(){return this.el_.duration||0},vjs.Html5.prototype.buffered=function(){return this.el_.buffered},vjs.Html5.prototype.volume=function(){return this.el_.volume},vjs.Html5.prototype.setVolume=function(t){this.el_.volume=t},vjs.Html5.prototype.muted=function(){return this.el_.muted},vjs.Html5.prototype.setMuted=function(t){this.el_.muted=t},vjs.Html5.prototype.width=function(){return this.el_.offsetWidth},vjs.Html5.prototype.height=function(){return this.el_.offsetHeight},vjs.Html5.prototype.supportsFullScreen=function(){return!("function"!=typeof this.el_.webkitEnterFullScreen||!/Android/.test(vjs.USER_AGENT)&&/Chrome|Mac OS X 10.5/.test(vjs.USER_AGENT))},vjs.Html5.prototype.enterFullScreen=function(){var t=this.el_;t.paused&&t.networkState<=t.HAVE_METADATA?(this.el_.play(),setTimeout(function(){t.pause(),t.webkitEnterFullScreen()},0)):t.webkitEnterFullScreen()},vjs.Html5.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},vjs.Html5.prototype.src=function(t){this.el_.src=t},vjs.Html5.prototype.load=function(){this.el_.load()},vjs.Html5.prototype.currentSrc=function(){return this.el_.currentSrc},vjs.Html5.prototype.preload=function(){return this.el_.preload},vjs.Html5.prototype.setPreload=function(t){this.el_.preload=t},vjs.Html5.prototype.autoplay=function(){return this.el_.autoplay},vjs.Html5.prototype.setAutoplay=function(t){this.el_.autoplay=t},vjs.Html5.prototype.controls=function(){return this.el_.controls},vjs.Html5.prototype.setControls=function(t){this.el_.controls=!!t},vjs.Html5.prototype.loop=function(){return this.el_.loop},vjs.Html5.prototype.setLoop=function(t){this.el_.loop=t},vjs.Html5.prototype.error=function(){return this.el_.error},vjs.Html5.prototype.seeking=function(){return this.el_.seeking},vjs.Html5.prototype.ended=function(){return this.el_.ended},vjs.Html5.prototype.defaultMuted=function(){return this.el_.defaultMuted},vjs.Html5.isSupported=function(){return!!vjs.TEST_VID.canPlayType},vjs.Html5.canPlaySource=function(t){try{return!!vjs.TEST_VID.canPlayType(t.type)}catch(e){return""}},vjs.Html5.canControlVolume=function(){var t=vjs.TEST_VID.volume;return vjs.TEST_VID.volume=t/2+.1,t!==vjs.TEST_VID.volume},vjs.Html5.Events="loadstart,suspend,abort,error,emptied,stalled,loadedmetadata,loadeddata,canplay,canplaythrough,playing,waiting,seeking,seeked,ended,durationchange,timeupdate,progress,play,pause,ratechange,volumechange".split(","),vjs.Html5.disposeMediaElement=function(t){if(t){for(t.player=null,t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"==typeof t.load&&t.load()}},vjs.IS_OLD_ANDROID&&(document.createElement("video").constructor.prototype.canPlayType=function(t){return t&&-1!=t.toLowerCase().indexOf("video/mp4")?"maybe":""}),vjs.Flash=vjs.MediaTechController.extend({init:function(t,e,i){vjs.MediaTechController.call(this,t,e,i);var s=e.source,n=e.parentEl,o=this.el_=vjs.createEl("div",{id:t.id()+"_temp_flash"}),r=t.id()+"_flash_api",a=t.options_,l=vjs.obj.merge({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:a.autoplay,preload:a.preload,loop:a.loop,muted:a.muted},e.flashVars),c=vjs.obj.merge({wmode:"opaque",bgcolor:"#000000"},e.params),u=vjs.obj.merge({id:r,name:r,"class":"vjs-tech"},e.attributes);if(s)if(s.type&&vjs.Flash.isStreamingType(s.type)){var h=vjs.Flash.streamToParts(s.src);l.rtmpConnection=encodeURIComponent(h.connection),l.rtmpStream=encodeURIComponent(h.stream)}else l.src=encodeURIComponent(vjs.getAbsoluteURL(s.src));if(vjs.insertFirst(o,n),e.startTime&&this.ready(function(){this.load(),this.play(),this.currentTime(e.startTime)}),!0!==e.iFrameMode||vjs.IS_FIREFOX)vjs.Flash.embed(e.swf,o,l,c,u);else{var p=vjs.createEl("iframe",{id:r+"_iframe",name:r+"_iframe",className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0});l.readyFunction="ready",l.eventProxyFunction="events",l.errorEventProxyFunction="errors",vjs.on(p,"load",vjs.bind(this,function(){var t,i=p.contentWindow;(t=p.contentDocument?p.contentDocument:p.contentWindow.document).write(vjs.Flash.getEmbedCode(e.swf,l,c,u)),i.player=this.player_,i.ready=vjs.bind(this.player_,function(e){var i=t.getElementById(e),s=this.tech;s.el_=i,vjs.Flash.checkReady(s)}),i.events=vjs.bind(this.player_,function(t,e){var i=this;i&&"flash"===i.techName&&i.trigger(e)}),i.errors=vjs.bind(this.player_,function(t,e){vjs.log("Flash Error",e)})})),o.parentNode.replaceChild(p,o)}}}),vjs.Flash.prototype.dispose=function(){vjs.MediaTechController.prototype.dispose.call(this)},vjs.Flash.prototype.play=function(){this.el_.vjs_play()},vjs.Flash.prototype.pause=function(){this.el_.vjs_pause()},vjs.Flash.prototype.src=function(t){if(vjs.Flash.isStreamingSrc(t)?(t=vjs.Flash.streamToParts(t),this.setRtmpConnection(t.connection),this.setRtmpStream(t.stream)):(t=vjs.getAbsoluteURL(t),this.el_.vjs_src(t)),this.player_.autoplay()){var e=this;setTimeout(function(){e.play()},0)}},vjs.Flash.prototype.currentSrc=function(){var t=this.el_.vjs_getProperty("currentSrc");if(null==t){var e=this.rtmpConnection(),i=this.rtmpStream();e&&i&&(t=vjs.Flash.streamFromParts(e,i))}return t},vjs.Flash.prototype.load=function(){this.el_.vjs_load()},vjs.Flash.prototype.poster=function(){this.el_.vjs_getProperty("poster")},
vjs.Flash.prototype.buffered=function(){return vjs.createTimeRange(0,this.el_.vjs_getProperty("buffered"))},vjs.Flash.prototype.supportsFullScreen=function(){return!1},vjs.Flash.prototype.enterFullScreen=function(){return!1};var api=vjs.Flash.prototype,readWrite="rtmpConnection,rtmpStream,preload,currentTime,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),readOnly="error,currentSrc,networkState,readyState,seeking,initialTime,duration,startOffsetTime,paused,played,seekable,ended,videoTracks,audioTracks,videoWidth,videoHeight,textTracks".split(","),createSetter=function(t){var e=t.charAt(0).toUpperCase()+t.slice(1);api["set"+e]=function(e){return this.el_.vjs_setProperty(t,e)}},createGetter=function(t){api[t]=function(){return this.el_.vjs_getProperty(t)}};if(function(){var t;for(t=0;t<readWrite.length;t++)createGetter(readWrite[t]),createSetter(readWrite[t]);for(t=0;t<readOnly.length;t++)createGetter(readOnly[t])}(),vjs.Flash.isSupported=function(){return vjs.Flash.version()[0]>=10},vjs.Flash.canPlaySource=function(t){var e;return t.type?(e=t.type.replace(/;.*/,"").toLowerCase())in vjs.Flash.formats||e in vjs.Flash.streamingFormats?"maybe":void 0:""},vjs.Flash.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},vjs.Flash.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},vjs.Flash.onReady=function(t){var e=vjs.el(t),i=e.player||e.parentNode.player,s=i.tech;e.player=i,s.el_=e,vjs.Flash.checkReady(s)},vjs.Flash.checkReady=function(t){t.el().vjs_getProperty?t.triggerReady():setTimeout(function(){vjs.Flash.checkReady(t)},50)},vjs.Flash.onEvent=function(t,e){vjs.el(t).player.trigger(e)},vjs.Flash.onError=function(t,e){vjs.el(t).player.trigger("error"),vjs.log("Flash Error",e,t)},vjs.Flash.version=function(){var t="0,0,0";try{t=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(e){try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(t=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(i){}}return t.split(",")},vjs.Flash.embed=function(t,e,i,s,n){var o=vjs.Flash.getEmbedCode(t,i,s,n),r=vjs.createEl("div",{innerHTML:o}).childNodes[0],a=e.parentNode;e.parentNode.replaceChild(r,e);var l=a.childNodes[0];return setTimeout(function(){l.style.display="block"},1e3),r},vjs.Flash.getEmbedCode=function(t,e,i,s){var n='<object type="application/x-shockwave-flash"',o="",r="",a="";return e&&vjs.obj.each(e,function(t,e){o+=t+"="+e+"&amp;"}),i=vjs.obj.merge({movie:t,flashvars:o,allowScriptAccess:"always",allowNetworking:"all"},i),vjs.obj.each(i,function(t,e){r+='<param name="'+t+'" value="'+e+'" />'}),s=vjs.obj.merge({data:t,width:"100%",height:"100%"},s),vjs.obj.each(s,function(t,e){a+=t+'="'+e+'" '}),n+a+">"+r+"</object>"},vjs.Flash.streamFromParts=function(t,e){return t+"&"+e},vjs.Flash.streamToParts=function(t){var e={connection:"",stream:""};if(!t)return e;var i,s=t.indexOf("&");return-1!==s?i=s+1:0===(s=i=t.lastIndexOf("/")+1)&&(s=i=t.length),e.connection=t.substring(0,s),e.stream=t.substring(i,t.length),e},vjs.Flash.isStreamingType=function(t){return t in vjs.Flash.streamingFormats},vjs.Flash.RTMP_RE=/^rtmp[set]?:\/\//i,vjs.Flash.isStreamingSrc=function(t){return vjs.Flash.RTMP_RE.test(t)},vjs.MediaLoader=vjs.Component.extend({init:function(t,e,i){if(vjs.Component.call(this,t,e,i),t.options_.sources&&0!==t.options_.sources.length)t.src(t.options_.sources);else for(var s=0,n=t.options_.techOrder;s<n.length;s++){var o=vjs.capitalize(n[s]),r=window.videojs[o];if(r&&r.isSupported()){t.loadTech(o);break}}}}),vjs.Player.prototype.textTracks_,vjs.Player.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||[],this.textTracks_},vjs.Player.prototype.addTextTrack=function(t,e,i,s){var n=this.textTracks_=this.textTracks_||[];(s=s||{}).kind=t,s.label=e,s.language=i;var o=vjs.capitalize(t||"subtitles"),r=new window.videojs[o+"Track"](this,s);return n.push(r),r},vjs.Player.prototype.addTextTracks=function(t){for(var e,i=0;i<t.length;i++)e=t[i],this.addTextTrack(e.kind,e.label,e.language,e);return this},vjs.Player.prototype.showTextTrack=function(t,e){for(var i,s,n,o=this.textTracks_,r=0,a=o.length;r<a;r++)(i=o[r]).id()===t?(i.show(),s=i):e&&i.kind()==e&&i.mode()>0&&i.disable();return(n=s?s.kind():e||!1)&&this.trigger(n+"trackchange"),this},vjs.TextTrack=vjs.Component.extend({init:function(t,e){vjs.Component.call(this,t,e),this.id_=e.id||"vjs_"+e.kind+"_"+e.language+"_"+vjs.guid++,this.src_=e.src,this.dflt_=e["default"]||e.dflt,this.title_=e.title,this.language_=e.srclang,this.label_=e.label,this.cues_=[],this.activeCues_=[],this.readyState_=0,this.mode_=0,this.player_.on("fullscreenchange",vjs.bind(this,this.adjustFontSize))}}),vjs.TextTrack.prototype.kind_,vjs.TextTrack.prototype.kind=function(){return this.kind_},vjs.TextTrack.prototype.src_,vjs.TextTrack.prototype.src=function(){return this.src_},vjs.TextTrack.prototype.dflt_,vjs.TextTrack.prototype.dflt=function(){return this.dflt_},vjs.TextTrack.prototype.title_,vjs.TextTrack.prototype.title=function(){return this.title_},vjs.TextTrack.prototype.language_,vjs.TextTrack.prototype.language=function(){return this.language_},vjs.TextTrack.prototype.label_,vjs.TextTrack.prototype.label=function(){return this.label_},vjs.TextTrack.prototype.cues_,vjs.TextTrack.prototype.cues=function(){return this.cues_},vjs.TextTrack.prototype.activeCues_,vjs.TextTrack.prototype.activeCues=function(){return this.activeCues_},vjs.TextTrack.prototype.readyState_,vjs.TextTrack.prototype.readyState=function(){return this.readyState_},vjs.TextTrack.prototype.mode_,vjs.TextTrack.prototype.mode=function(){return this.mode_},vjs.TextTrack.prototype.adjustFontSize=function(){this.player_.isFullScreen?this.el_.style.fontSize=screen.width/this.player_.width()*1.4*100+"%":this.el_.style.fontSize=""},vjs.TextTrack.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-"+this.kind_+" vjs-text-track"})},vjs.TextTrack.prototype.show=function(){this.activate(),this.mode_=2,vjs.Component.prototype.show.call(this)},vjs.TextTrack.prototype.hide=function(){this.activate(),this.mode_=1,vjs.Component.prototype.hide.call(this)},vjs.TextTrack.prototype.disable=function(){2==this.mode_&&this.hide(),this.deactivate(),this.mode_=0},vjs.TextTrack.prototype.activate=function(){0===this.readyState_&&this.load(),0===this.mode_&&(this.player_.on("timeupdate",vjs.bind(this,this.update,this.id_)),this.player_.on("ended",vjs.bind(this,this.reset,this.id_)),"captions"!==this.kind_&&"subtitles"!==this.kind_||this.player_.getChild("textTrackDisplay").addChild(this))},vjs.TextTrack.prototype.deactivate=function(){this.player_.off("timeupdate",vjs.bind(this,this.update,this.id_)),this.player_.off("ended",vjs.bind(this,this.reset,this.id_)),this.reset(),this.player_.getChild("textTrackDisplay").removeChild(this)},vjs.TextTrack.prototype.load=function(){0===this.readyState_&&(this.readyState_=1,vjs.get(this.src_,vjs.bind(this,this.parseCues),vjs.bind(this,this.onError)))},vjs.TextTrack.prototype.onError=function(t){this.error=t,this.readyState_=3,this.trigger("error")},vjs.TextTrack.prototype.parseCues=function(t){for(var e,i,s,n,o=t.split("\n"),r="",a=1,l=o.length;a<l;a++)if(r=vjs.trim(o[a])){for(-1==r.indexOf("-->")?(n=r,r=vjs.trim(o[++a])):n=this.cues_.length,e={id:n,index:this.cues_.length},i=r.split(" --> "),e.startTime=this.parseCueTime(i[0]),e.endTime=this.parseCueTime(i[1]),s=[];o[++a]&&(r=vjs.trim(o[a]));)s.push(r);e.text=s.join("<br/>"),this.cues_.push(e)}this.readyState_=2,this.trigger("loaded")},vjs.TextTrack.prototype.parseCueTime=function(t){var e,i,s,n,o,r=t.split(":"),a=0;return 3==r.length?(e=r[0],i=r[1],s=r[2]):(e=0,i=r[0],s=r[1]),n=(n=(s=s.split(/\s+/)).splice(0,1)[0]).split(/\.|,/),o=parseFloat(n[1]),n=n[0],a+=3600*parseFloat(e),a+=60*parseFloat(i),a+=parseFloat(n),o&&(a+=o/1e3),a},vjs.TextTrack.prototype.update=function(){if(this.cues_.length>0){var t=this.player_.currentTime();if(this.prevChange===undefined||t<this.prevChange||this.nextChange<=t){var e,i,s,n,o=this.cues_,r=this.player_.duration(),a=0,l=!1,c=[];for(t>=this.nextChange||this.nextChange===undefined?n=this.firstActiveIndex!==undefined?this.firstActiveIndex:0:(l=!0,n=this.lastActiveIndex!==undefined?this.lastActiveIndex:o.length-1);;){if((s=o[n]).endTime<=t)a=Math.max(a,s.endTime),s.active&&(s.active=!1);else if(t<s.startTime){if(r=Math.min(r,s.startTime),s.active&&(s.active=!1),!l)break}else l?(c.splice(0,0,s),i===undefined&&(i=n),e=n):(c.push(s),e===undefined&&(e=n),i=n),r=Math.min(r,s.endTime),a=Math.max(a,s.startTime),s.active=!0;if(l){if(0===n)break;n--}else{if(n===o.length-1)break;n++}}this.activeCues_=c,this.nextChange=r,this.prevChange=a,this.firstActiveIndex=e,this.lastActiveIndex=i,this.updateDisplay(),this.trigger("cuechange")}}},vjs.TextTrack.prototype.updateDisplay=function(){for(var t=this.activeCues_,e="",i=0,s=t.length;i<s;i++)e+='<span class="vjs-tt-cue">'+t[i].text+"</span>";this.el_.innerHTML=e},vjs.TextTrack.prototype.reset=function(){this.nextChange=0,this.prevChange=this.player_.duration(),this.firstActiveIndex=0,this.lastActiveIndex=0},vjs.CaptionsTrack=vjs.TextTrack.extend(),vjs.CaptionsTrack.prototype.kind_="captions",vjs.SubtitlesTrack=vjs.TextTrack.extend(),vjs.SubtitlesTrack.prototype.kind_="subtitles",vjs.ChaptersTrack=vjs.TextTrack.extend(),vjs.ChaptersTrack.prototype.kind_="chapters",vjs.TextTrackDisplay=vjs.Component.extend({init:function(t,e,i){vjs.Component.call(this,t,e,i),t.options_.tracks&&t.options_.tracks.length>0&&this.player_.addTextTracks(t.options_.tracks)}}),vjs.TextTrackDisplay.prototype.createEl=function(){return vjs.Component.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"})},vjs.TextTrackMenuItem=vjs.MenuItem.extend({init:function(t,e){var i=this.track=e.track;e.label=i.label(),e.selected=i.dflt(),vjs.MenuItem.call(this,t,e),this.player_.on(i.kind()+"trackchange",vjs.bind(this,this.update))}}),vjs.TextTrackMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this),this.player_.showTextTrack(this.track.id_,this.track.kind())},vjs.TextTrackMenuItem.prototype.update=function(){this.selected(2==this.track.mode())},vjs.OffTextTrackMenuItem=vjs.TextTrackMenuItem.extend({init:function(t,e){e.track={kind:function(){return e.kind},player:t,label:function(){return e.kind+" off"},dflt:function(){return!1},mode:function(){return!1}},vjs.TextTrackMenuItem.call(this,t,e),this.selected(!0)}}),vjs.OffTextTrackMenuItem.prototype.onClick=function(){vjs.TextTrackMenuItem.prototype.onClick.call(this),this.player_.showTextTrack(this.track.id_,this.track.kind())},vjs.OffTextTrackMenuItem.prototype.update=function(){for(var t,e=this.player_.textTracks(),i=0,s=e.length,n=!0;i<s;i++)(t=e[i]).kind()==this.track.kind()&&2==t.mode()&&(n=!1);this.selected(n)},vjs.TextTrackButton=vjs.MenuButton.extend({init:function(t,e){vjs.MenuButton.call(this,t,e),this.items.length<=1&&this.hide()}}),vjs.TextTrackButton.prototype.createItems=function(){var t,e=[];e.push(new vjs.OffTextTrackMenuItem(this.player_,{kind:this.kind_}));for(var i=0;i<this.player_.textTracks().length;i++)(t=this.player_.textTracks()[i]).kind()===this.kind_&&e.push(new vjs.TextTrackMenuItem(this.player_,{track:t}));return e},vjs.CaptionsButton=vjs.TextTrackButton.extend({init:function(t,e,i){vjs.TextTrackButton.call(this,t,e,i),this.el_.setAttribute("aria-label","Captions Menu")}}),vjs.CaptionsButton.prototype.kind_="captions",vjs.CaptionsButton.prototype.buttonText="Captions",vjs.CaptionsButton.prototype.className="vjs-captions-button",vjs.SubtitlesButton=vjs.TextTrackButton.extend({init:function(t,e,i){vjs.TextTrackButton.call(this,t,e,i),this.el_.setAttribute("aria-label","Subtitles Menu")}}),vjs.SubtitlesButton.prototype.kind_="subtitles",vjs.SubtitlesButton.prototype.buttonText="Subtitles",vjs.SubtitlesButton.prototype.className="vjs-subtitles-button",vjs.ChaptersButton=vjs.TextTrackButton.extend({init:function(t,e,i){vjs.TextTrackButton.call(this,t,e,i),this.el_.setAttribute("aria-label","Chapters Menu")}}),vjs.ChaptersButton.prototype.kind_="chapters",vjs.ChaptersButton.prototype.buttonText="Chapters",vjs.ChaptersButton.prototype.className="vjs-chapters-button",vjs.ChaptersButton.prototype.createItems=function(){for(var t,e=[],i=0;i<this.player_.textTracks().length;i++)(t=this.player_.textTracks()[i]).kind()===this.kind_&&e.push(new vjs.TextTrackMenuItem(this.player_,{track:t}));return e},vjs.ChaptersButton.prototype.createMenu=function(){for(var t,e,i=this.player_.textTracks(),s=0,n=i.length,o=this.items=[];s<n;s++)if((t=i[s]).kind()==this.kind_&&t.dflt()){if(t.readyState()<2)return this.chaptersTrack=t,void t.on("loaded",vjs.bind(this,this.createMenu));e=t;break}var r=this.menu=new vjs.Menu(this.player_);if(r.el_.appendChild(vjs.createEl("li",{className:"vjs-menu-title",innerHTML:vjs.capitalize(this.kind_),tabindex:-1})),e){var a,l,c=e.cues_;for(s=0,n=c.length;s<n;s++)a=c[s],l=new vjs.ChaptersTrackMenuItem(this.player_,{track:e,cue:a}),o.push(l),r.addChild(l)}return this.items.length>0&&this.show(),r},vjs.ChaptersTrackMenuItem=vjs.MenuItem.extend({init:function(t,e){var i=this.track=e.track,s=this.cue=e.cue,n=t.currentTime();e.label=s.text,e.selected=s.startTime<=n&&n<s.endTime,vjs.MenuItem.call(this,t,e),i.on("cuechange",vjs.bind(this,this.update))}}),vjs.ChaptersTrackMenuItem.prototype.onClick=function(){vjs.MenuItem.prototype.onClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},vjs.ChaptersTrackMenuItem.prototype.update=function(){var t=this.cue,e=this.player_.currentTime();this.selected(t.startTime<=e&&e<t.endTime)},vjs.obj.merge(vjs.ControlBar.prototype.options_.children,{subtitlesButton:{},captionsButton:{},chaptersButton:{}}),vjs.JSON,"undefined"!=typeof window.JSON&&"function"===window.JSON.parse)vjs.JSON=window.JSON;else{vjs.JSON={};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;vjs.JSON.parse=function(text,reviver){function walk(t,e){var i,s,n=t[e];if(n&&"object"==typeof n)for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&((s=walk(n,i))!==undefined?n[i]=s:delete n[i]);return reviver.call(t,e,n)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse(): invalid or malformed JSON data")}}vjs.autoSetup=function(){var t,e,i=document.getElementsByTagName("video");if(i&&i.length>0)for(var s=0,n=i.length;s<n;s++){if(!(e=i[s])||!e.getAttribute){vjs.autoSetupTimeout(1);break}e.player===undefined&&null!==(t=e.getAttribute("data-setup"))&&(t=vjs.JSON.parse(t||"{}"),videojs(e,t))}else vjs.windowLoaded||vjs.autoSetupTimeout(1)},vjs.autoSetupTimeout=function(t){setTimeout(vjs.autoSetup,t)},"complete"===document.readyState?vjs.windowLoaded=!0:vjs.one(window,"load",function(){vjs.windowLoaded=!0}),vjs.autoSetupTimeout(1),vjs.plugin=function(t,e){vjs.Player.prototype[t]=e},function(){var t,e=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};t=function(){function t(t){this.el=$(t),this.studyId=this.el.data().studyId,this.loadingEl=this.el.find("div.loading"),this.stackViewEl=this.el.find(".stack")}return window.stackViewHovering=!1,t.prototype.init=function(t){var i,s,n;return s=$.getJSON(this.el.data().studyStacksUrl,(n=this,function(t){return null==window.stackedImages&&(window.stackedImages={}),window.stackedImages[n.studyId]=t})),this.el.find(".carousel").length>0?(this.startingThumb=0,i=this.loadCarousel(),$.when(s,i).done(function(e){return function(){if(e.initializeJCarousel(),t)return t()}}(this)).fail(function(t){return function(){return t.stackLoadingFailed()}}(this))):$.when(s).done(function(t){return function(){return t.loadSolitaryStack()}}(this)).fail(function(t){return function(){return t.stackLoadingFailed()}}(this)),this.el.hover(function(){return window.stackViewHovering=!0},function(){return window.stackViewHovering=!1}),$(document).keydown(function(t){return function(i){var s,n;return n=[37,38,39,40],s=i.keyCode,!(e.call(n,s)>=0&&!0===window.stackViewHovering)||(t.keydownHandler(i),!1)}}(this))},t.prototype.loadSolitaryStack=function(){return this.stackController=new StackController(stackedImages[this.studyId],{stackViewEl:this.stackViewEl})},t.prototype.loadCarousel=function(){var t;return this.loadingEl.show(),t=this.el.find(".carousel"),$.get(t.data("resource-url"),function(e){return t.html(e).hide()})},t.prototype.stackLoadingFailed=function(){var t;return this.loadingEl.hide(),t='<div class="image-error">\n  <p><strong class="image-error-heading">Unable to load images</strong></p>\n  <p class="image-error-message">\n    Please try reloading the page. If the problem continues\n    <a href="mailto:support@radiopaedia.org?subject='+encodeURIComponent("Unable to load images in study "+this.studyId)+"&body="+encodeURIComponent("The images in study "+this.studyId+" are not loading on "+location.href+".\n\nMy browser is: "+navigator.userAgent+".")+'">send us an email to let us know</a>.\n  </p>\n  <button class="btn default btn-default">Reload page</button>\n</div>',this.stackViewEl.empty().append(t).find("button").click(function(){return location.reload(!0)})},t.prototype.clickThumb=function(t){var e,i;i=t.parent("li").attr("position"),this.stackController.setStackWithPosition(i),this.el.find(".carousel > li.current").removeClass("current"),t.parent().addClass("current"),e=t.siblings("div.hidden-desc"),this.el.find("div.main-desc").html(e.html()),t.trigger("imageChanged")},t.prototype.initializeJCarousel=function(){var t,e;this.loadingEl.hide(),0!==(t=this.el.find(".carousel")).length&&(t.show(),t.jcarousel({scroll:1}),e=this,this.el.find(".carousel > li > a.thumbnail").live("click",function(t){return t.preventDefault(),e.clickThumb($(this))}),void 0!==this.studyId&&(this.stackController=new StackController(stackedImages[this.studyId],{stackViewEl:this.stackViewEl})),t.trigger("imageChanged"),t.trigger("carousel.initialized"),this.el.find(".carousel > li:nth-of-type("+this.startingThumb+"1) > a.thumbnail").click())},t.prototype.keydownHandler=function(t){var e,i;if(!(t.which<37||t.which>40)){switch(t.which){case 37:case 39:e=$(".carousel > li.current"),(i=37===t.which?e.prev("li"):e.next("li")).length>0&&(e.removeClass("current"),i.addClass("current"),$("a.thumbnail",i).trigger("click"));break;case 38:case 40:this.changeImageBy(t.which>38?-1:1)}t.preventDefault()}},t.prototype.changeImageBy=function(t){"undefined"!=typeof this.currentStack&&this.currentStack.changeImageBy(t)},t.prototype.empty=function(){this.el.find(".image.target ul.stack").empty(),this.el.find("div.main-desc").empty()},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).Gallery=t}.call(this),function(){var t;t=function(){function t(t,e){var i,s,n,o,r,a;for(this.images=t.images.slice(),this.modality=t.modality,this.featuredStatus=t.has_featured_or_upcoming_image,this.loadedImages=[],this.stackKeyImageIndex=null,this.caseKeyImageIndex=null,this.loadingPaused=!0,this.previousIndex=null,this.thumbnailEl=e,n=0,o=(r=this.images).length;n<o;n++)(s=r[n]).is_stack_key_image&&(a=s),s.is_case_key_image&&(i=s);this.imagesToLoad=this.images.slice(),this.posterImage=this.images[0],this.images.sort(function(t,e){return t.position-e.position}),this.currentIndex=this.images.indexOf(this.posterImage),null!=i&&(this.caseKeyImageIndex=this.images.indexOf(i)),this.stackKeyImageIndex=this.images.indexOf(a)}return t.prototype.updateStackThumbnail=function(t){return this.thumbnailEl.attr("src",t)},t.prototype.setCurrentAsStackKeyImage=function(){return this.stackKeyImageIndex>=0&&(this.images[this.stackKeyImageIndex].is_stack_key_image=!1),this.stackKeyImageIndex=Math.round(this.currentIndex),this.images[this.stackKeyImageIndex].is_stack_key_image=!0},t.prototype.setCurrentAsCaseKeyImage=function(){return this.caseKeyImageIndex=this.images.indexOf(this.currentImage()),this.images[this.caseKeyImageIndex].is_case_key_image=!0},t.prototype.resetCaseKeyImage=function(){if(null!=this.caseKeyImageIndex)return this.images[this.caseKeyImageIndex].is_case_key_image=!1,this.caseKeyImageIndex=null},t.prototype.toggleAttributeIsActive=function(t){if("boolean"==typeof this.images[Math.round(this.currentIndex)][t])return this.images[Math.round(this.currentIndex)][t]=!this.images[Math.round(this.currentIndex)][t]},t.prototype.nextImageToLoad=function(){return this.imagesToLoad.shift()},t.prototype.addLoadedImage=function(t){if(-1===this.loadedImages.indexOf(t)&&(this.loadedImages.push(t),$(this).trigger("load-image",t)),this.isLoaded()&&$(this).trigger("stack:load:full"),this.isLoaded())return $(this).trigger("load")},t.prototype.isLoaded=function(){return this.loadedImages.length===this.size()},t.prototype.size=function(){return this.images.length},t.prototype.numberOfImagesRemainingToLoad=function(){return this.size()-this.loadedImages.length},t.prototype.imageAtIndex=function(t){return 0<=t&&t<this.size()?this.images[t].image:null},t.prototype.currentImage=function(){return this.images[Math.round(this.currentIndex)]},t.prototype.delta=function(t){return this.currentIndex=Math.min(Math.max(this.currentIndex-t,0),this.size()-1)},t.prototype.setCurrentIndex=function(t){return this.currentIndex=Math.min(Math.max(t,0),this.size()-1)},t.prototype.startLoadingImages=function(){var t,e;for(this.loadingPaused=!1,e=[],t=0;t<8;++t)e.push(this.loadNextStackImage());return e},t.prototype.stopLoadingImages=function(){return this.loadingPaused=!0},t.prototype.loadNextStackImage=function(){var t,e,i;if(this.imagesToLoad.length>0&&!this.loadingPaused){for(t=this.imagesToLoad.shift();t.content_type.indexOf("video")>=0;)if(null==(t=this.imagesToLoad.shift()))return;return e=new Image,$(e).on("load",(i=this,function(){return i.addLoadedImage(e),i.loadNextStackImage()})).on("error",function(i){return function(){var s;return t.fullscreen_filename.match(/.+\.jpeg$/)?(s=t.public_filename.match(/\.\w+$/)[0],t.fullscreen_filename=t.fullscreen_filename.replace(/\.jpeg$/,s),e.src=t.fullscreen_filename):t.fullscreen_filename!==t.public_filename?(t.fullscreen_filename=t.public_filename,e.src=t.fullscreen_filename):i.loadNextStackImage()}}(this)),e.src=t.fullscreen_filename}},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).Stack=t}.call(this),function(t){var e=t(window);t.fn.visible=function(t,i,s){if(!(this.length<1)){var n=this.length>1?this.eq(0):this,o=n.get(0),r=e.width(),a=e.height(),l=(s=s||"both",!0!==i||o.offsetWidth*o.offsetHeight);if("function"==typeof o.getBoundingClientRect){var c=o.getBoundingClientRect(),u=c.top>=0&&c.top<a,h=c.bottom>0&&c.bottom<=a,p=c.left>=0&&c.left<r,d=c.right>0&&c.right<=r,v=t?u||h:u&&h,f=t?p||d:p&&d;if("both"===s)return l&&v&&f;if("vertical"===s)return l&&v;if("horizontal"===s)return l&&f}else{var m=e.scrollTop(),g=m+a,y=e.scrollLeft(),j=y+r,b=n.offset(),_=b.top,k=_+n.height(),C=b.left,T=C+n.width(),w=!0===t?k:_,x=!0===t?_:k,S=!0===t?T:C,I=!0===t?C:T;if("both"===s)return!!l&&g>=x&&w>=m&&j>=I&&S>=y;if("vertical"===s)return!!l&&g>=x&&w>=m;if("horizontal"===s)return!!l&&j>=I&&S>=y}}}}(jQuery),function(){var t;t=function(){function t(t){var e,i,s,n;this.el=$(t),this.img=this.el.children("img"),this.inView=!0,this.scrollEnabled=!1,this.toolbar=$('<div class="clearfix stack-view-toolbar"></div>'),this.el.append(this.toolbar),s=$('<div class="relative-fill offline-workflow-outer-wrapper"></div>'),i=$('<div class="relative-fill offline-workflow-image-wrapper"></div>').css({margin:"0 auto"}),e=$('<div class="relative-fill offline-workflow-control-wrapper"></div>'),this.img.wrap(i),this.imageWrapper=this.img.parent(),this.imageWrapper.wrap(e),this.controlWrapper=this.imageWrapper.parent(),this.controlWrapper.wrap(s),this.outerWrapper=this.controlWrapper.parent(),this.loader=$("<span class='stack-image-loader'></span>"),this.outerWrapper.prepend(this.loader),this.img.on("load",(n=this,function(){return n.windowResized(),n.img.show(),n.loader.text("")})),this.img.on("click",function(t){return function(){if(t.stackIsCropPending())return window.location.reload()}}(this)),this.attachToggleScrollButtons(),this.attachScrollbar(),this.scrollbar.hide(),this.toggleScrollWrapper.hide(),this.attachModalityLabel(),this.insertLoaderTimeout=null,$(document).on("keydown",function(t){return function(e){if(!0===window.stackViewHovering){if(38===e.which)return t.scrollBy(1);if(40===e.which)return t.scrollBy(-1)}}}(this)),$(window).resize(function(t){return function(){return t.windowResized()}}(this)),$(window).scroll(function(t){return function(){return t.windowScrolled()}}(this))}return window.stackViewHovering=!1,t.prototype.attachToggleScrollButtons=function(){var t;return this.toggleScrollWrapper=$('<div class="stack-toggle-scroll-wrapper"></div>'),this.toolbar.append(this.toggleScrollWrapper),this.enableScrollButton=$('<button class="stack-scroll-button stack-scroll-button-enable">Scroll Stack</button>'),this.disableScrollButton=$('<button class="hidden stack-scroll-button stack-scroll-button-disable">Scroll Stack</button>'),this.toggleScrollWrapper.append(this.enableScrollButton,this.disableScrollButton),$(this.enableScrollButton).on("click",(t=this,function(){return t.scrollbar.show(),t.enableScroll(),t.enableScrollButton.addClass("hidden"),t.disableScrollButton.removeClass("hidden")})),$(this.disableScrollButton).on("click",function(t){return function(){return t.enableScrollButton.removeClass("hidden"),t.disableScrollButton.addClass("hidden"),t.disableScroll()}}(this))},t.prototype.disableScroll=function(){return this.scrollEnabled=!1,this.scrollbar.hide(),this.outerWrapper.off()},t.prototype._findTouch=function(t,e){var i,s,n,o;if(null==t||null==e)return null;for(i=s=0,n=t.length;0<=n?s<n:s>n;i=0<=n?++s:--s)if((o=t.item(i)).identifier===e)return o;return null},t.prototype.enableScroll=function(){var t;if(!this.scrollEnabled)return this.scrollEnabled=!0,this.outerWrapper.mousewheel((t=this,function(e){var i;return e.preventDefault(),i=e.deltaY,e.deltaFactor<=2&&(i/=25),t.scrollBy(Math.min(1,Math.max(-1,i)))})).on("touchstart",function(t){return function(e){var i,s,n;if(n=null!=(i=e.originalEvent)&&null!=(s=i.touches)?s.item(0):void 0,1===e.originalEvent.touches.length&&null!=n)return t.lastTouchY=n.pageY,t.trackingTouchId=n.identifier}}(this)).on("touchmove",function(t){return function(e){var i,s,n;if(!(e.originalEvent.touches.length>1)){if(null==(n=t._findTouch(null!=(s=e.originalEvent)?s.touches:void 0,t.trackingTouchId)))return;return e.preventDefault(),i=n.pageY-t.lastTouchY,t.scrollBy(i/t.outerWrapper.height()*t.stack.size()),t.lastTouchY=n.pageY}}}(this)).on("touchend",function(t){return function(e){if("undefined"!=typeof trackingTouch&&null!==trackingTouch)return e.preventDefault(),t.trackingTouchId=null}}(this)).on("mouseenter",function(){return window.stackViewHovering=!0}).on("mouseleave",function(){return window.stackViewHovering=!1})},t.prototype.scrollBy=function(t){var e;if(this.stack.delta(t),!((e=this.stack.currentImage()).content_type.indexOf("video")>=0))return this.setImage(e)},t.prototype.setImage=function(t){var e;if(null!=t)return this.removeVideo(),$(this).trigger("setImage"),t.content_type.indexOf("video")>=0?(this.img.hide(),this.presentVideo(t)):t.crop_pending?this.img.attr("src",$("img#cropping-in-progress").attr("src")):this.img.filter(":visible").attr("src")!==t.fullscreen_filename&&(this.img.attr("src",t.fullscreen_filename),this.img.on("error",(e=this,function(){var i,s;return e.img.attr("src").match(/.+\.jpeg$/)?(i=t.public_filename.match(/\.\w+$/)[0],s=t.fullscreen_filename.replace(/\.jpeg$/,i),e.img.attr("src",s)):e.img.attr("src")!==t.public_filename?e.img.attr("src",t.public_filename):void 0})),this.insertLoader()),this.updateScrollbar()},t.prototype.insertLoader=function(){return null!=this.insertLoaderTimeout&&clearTimeout(this.insertLoaderTimeout),this.insertLoaderTimeout=setTimeout((t=this,function(){var e;if(!(null!=(e=t.img[0])?e.complete:void 0))return t.loader.text("Loading Image "+(Math.round(t.stack.currentIndex)+1))}),2e3);var t},t.prototype.removeVideo=function(){return this.imageWrapper.find(".video-link, .video-js-box").remove()},t.prototype.presentVideo=function(t){var e,i;return i='<!-- Begin VideoJS -->\n<div class="video-js-box">\n  <video class="video-js vjs-default-skin vjs-big-play-centered" width="630" height="630" controls preload="none" loop>\n    <source type="video/mp4" />\n  </video>\n</div>\n<!-- End VideoJS -->',i=$(i),0===(e=this.imageWrapper.height())&&(e=this.imageWrapper.width()/4*3),$("video source",i).attr("src",t.public_filename),$("video, object",i).attr({id:t.id,width:this.imageWrapper.width(),height:e}),this.img.hide(),i.appendTo(this.imageWrapper),this.activateVideos()},t.prototype.activateVideos=function(){return this.el.find("video:visible").each(function(){return videojs(this,{preload:"none"})})},t.prototype.attachScrollbar=function(){var t;return this.scrollbar=$('<div class="scrollbar"><div class="track"><div class="knob"></div></div><a class="up" href="#"></a><a class="down" href="#"></a></div>').appendTo(this.controlWrapper),this.scrollKnob=this.scrollbar.find(".knob"),this.scrollKnob.draggable({containment:"parent",axis:"y",drag:(t=this,function(e,i){var s,n,o;if(o=(i.offset.top-t.scrollKnob.parent().offset().top+2.5)/t.scrollKnob.parent().height(),s=Math.round(o*t.stack.size()),t.stack.setCurrentIndex(s),!((n=t.stack.currentImage()).content_type.indexOf("video")>=0))return t.setImage(n)})}),this.scrollbar.find(".up").on("click",function(t){return function(e){return e.preventDefault(),t.scrollBy(1)}}(this)),this.scrollbar.find(".down").on("click",function(t){return function(e){return e.preventDefault(),t.scrollBy(-1)}}(this))},t.prototype.updateScrollbar=function(){if(this.scrollKnob.css({top:this.stack.currentIndex/this.stack.size()*100+"%"}),this.deviceIsTouch())return this.multipleImageStack()?(this.enableScrollButton.show(),this.disableScrollButton.show()):(this.enableScrollButton.hide(),this.disableScrollButton.hide())},t.prototype.attachModalityLabel=function(){return this.modalityLabel=$('<div class="modality"></div>').appendTo(this.imageWrapper)},t.prototype.updateModalityLabel=function(){var t,e,i;return t=this.stack.currentImage(),i=this.stack.modality,e="",t.perspective&&(e=t.perspective),t.specifics&&(e=e?e+" "+t.specifics:t.specifics),i&&e?i=i+": "+e:e&&(i=e),this.modalityLabel.text(i)},t.prototype.setStack=function(t){var e;return this.stack=t,this.resizeScrollKnob(),this.hideOrShowScroll(),e=this.stack.currentImage(),this.resizeForImage(e),this.setImage(e),this.updateModalityLabel()},t.prototype.currentImage=function(){return this.stack.currentImage()},t.prototype.windowResized=function(){if(null!=this.stack)return this.resizeForImage(this.stack.currentImage())},t.prototype.windowScrolled=function(){if(this.stackController.stacksToLoad.length>0&&(this.el.visible(!0)||!Radiopaedia.galleryLoading)){if(!this.inView)return this.inView=!0,$(this).trigger("startLoadingNextStack"),Radiopaedia.galleryLoading=!0}else if(Radiopaedia.galleryLoading)return this.inView=!1},t.prototype.resizeForImage=function(t){return this.dataAttributes().mobile&&this.dataAttributes().fullscreen?this.resizeForImageInMobile(t):this.resizeForImageInDesktop(t)},t.prototype.resizeForImageInMobile=function(t){var e,i,s,n,o,r;if(0!==(e=$("#largeImage")).length)return r=$(window).height(),n=$("#footer-mobile").height(),i=$("#navTab").height(),s=Math.max(r-i-n-20,220),e.css("height",s+20+"px"),this.outerWrapper.css("width",e.width()-20),this.outerWrapper.css("height",s-20),o=t.height>t.width?(s-60)/t.height:t.height<t.width?(e.width()-60)/t.width:(Math.min(s,e.width())-60)/t.width,this.img.css("height",t.height*o),this.img.css("width",t.width*o),this.imageWrapper.css("height",t.height*o),this.imageWrapper.css("width",t.width*o),this.controlWrapper.css("height",t.height*o),this.controlWrapper.css("width","100%"),this.scrollbar.css("right",0),this.scrollbar.css("top",0)},t.prototype.resizeForImageInDesktop=function(t){var e,i,s,n,o,r,a;if(!(t.content_type.indexOf("video")>=0))return a=this.el.width()/t.width,
i=(e=this.el.height()/t.height)>0?Math.min(a,e):a,s=t.height*i,n=t.width*i,(o=this.img).css("height",s),o.css("width",n),this.imageWrapper.width(n),this.imageWrapper.height(s),r=0,o.outerHeight()<this.outerWrapper.height()&&(r=Math.round((this.outerWrapper.height()-o.outerHeight())/2)),o.css({position:"absolute",top:r+"px",left:0}),o.attr({id:"offline-workflow-study-large-image"});this.resizeForVideo(t)},t.prototype.resizeForVideo=function(){return this.imageWrapper.css({width:"100%"})},t.prototype.knobHeight=function(){return 1/this.stack.size()*100},t.prototype.resizeScrollKnob=function(){return this.scrollKnob.height(this.knobHeight()+"%")},t.prototype.hideOrShowScroll=function(){return this.multipleImageStack()&&!this.stackIsCropPending()?this.deviceIsTouch()?this.dataAttributes().fullscreen?(this.scrollbar.show(),this.enableScroll()):this.toggleScrollWrapper.show():(this.scrollbar.show(),this.enableScroll()):this.disableScroll()},t.prototype.deviceIsTouch=function(){return"undefined"!=typeof window.ontouchstart||window.force_touch_for_tests},t.prototype.stackIsCropPending=function(){return this.stack.currentImage().crop_pending},t.prototype.dataAttributes=function(){return $("body").data()},t.prototype.multipleImageStack=function(){return this.stack.size()>1},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).StackView=t}.call(this),function(){var t;t=function(){function t(t){t=t||{},this.stackView=null,this.wrapper=$('<div class="stack-toolbar clearfix"></div>'),this.stackControlsEnabled=t.stackControlsEnabled||!0,this.downloadImageIcon=$('<div class="js-tooltip icon download" data-name="download" data-placement="top" data-theme="grey" data-size="small" title="Download Image"></div>'),this.wrapper.append(this.downloadImageIcon),this.stackControlsEnabled&&(this.featureIcon=$('<div class="js-tooltip icon feature" data-name="feature" data-placement="top" data-theme="grey" data-size="small" title="Feature Image"></div>'),this.pinIcon=$('<div class="js-tooltip icon pin" data-name="pin" data-placement="top" data-theme="grey" data-size="small" title="Pin Image"></div>'),this.caseKeyIcon=$('<div class="js-tooltip icon case-key" data-name="case-key" data-placement="top" data-theme="grey" data-size="small" title="Set as case key image"></div>'),this.stackKeyIcon=$('<div class="js-tooltip icon stack-key" data-name="stack-key" data-placement="top" data-theme="grey" data-size="small" title="Set as stack key image"></div>'),this.wrapper.append(this.featureIcon,this.pinIcon,this.caseKeyIcon,this.stackKeyIcon))}return t.prototype.stack=function(){return this.stackView.stack},t.prototype.currentImage=function(){return this.stack().currentImage()},t.prototype.hideToolbar=function(){return this.wrapper.hide()},t.prototype.showToolbar=function(){return this.wrapper.show()},t.prototype.isHidden=function(){return"none"===this.wrapper.css("display")},t.prototype.addToStackView=function(t){var e;return this.stackView=t,this.stackView.toolbar.append(this.wrapper),$("body").data().touchBrowser||$(".js-tooltip").tooltip(),this.wrapper.find(".icon").on("click",(e=this,function(t){var i;if(t.preventDefault(),!(i=$(t.currentTarget)).attr("disabled"))return e.vTableCall(i.data("name"),i)})),$(this.stackView).on("setImage",function(t){return function(){return t.updateToolbar()}}(this))},t.prototype.updateToolbar=function(){var t;if(t=this.currentImage(),this.showToolbar(),this.downloadImageIcon.data("action-url",t.download_image_url),this.stackControlsEnabled)return this.updateFeatureIcon(t),this.updatePinIcon(t),this.updateCaseKeyIcon(t),this.updateStackKeyIcon(t)},t.prototype.updateFeatureIcon=function(t){return this.updateIcon(this.featureIcon,t.feature_url,t.unfeature_url,t.show_feature,t.is_featured),t.disable_feature?this.featureIcon.attr("disabled","disabled"):this.featureIcon.removeAttr("disabled")},t.prototype.updatePinIcon=function(t){return this.updateIcon(this.pinIcon,t.flag_url,t.flag_url,t.show_pin,t.is_flagged)},t.prototype.updateCaseKeyIcon=function(t){return this.updateIcon(this.caseKeyIcon,t.set_case_key_image_url,t.set_case_key_image_url,t.show_case_key_image,t.is_case_key_image)},t.prototype.updateStackKeyIcon=function(t){return this.updateIcon(this.stackKeyIcon,t.set_stack_key_image_url,t.set_stack_key_image_url,t.show_stack_key_image,t.is_stack_key_image)},t.prototype.updateIcon=function(t,e,i,s,n){return s?(t.show(),t.data("action-url",e),t.data("unaction-url",i)):t.hide(),t.toggleClass("true",n)},t.prototype.vTable=function(){return{feature:this.featureImage,pin:this.pinImage,"case-key":this.setKeyImage,"stack-key":this.setKeyImage,download:this.downloadImage}},t.prototype.vTableCall=function(t,e){if(this.vTable()[t])return this.vTable()[t].call(this,e)},t.prototype.bind=function(){var t;return t=this,$(".stack-toolbar .icon, .markers .icon").live("click",function(e){var i;if(e.preventDefault(),!(i=$(this)).attr("disabled"))return t.vTableCall(i.data("name"),i)})},t.prototype.setSaving=function(){return $.status_message("Saving...")},t.prototype.showSuccess=function(t){return $.success_message(t)},t.prototype.showResponseErrorOrDefault=function(t,e){var i,s;try{i=JSON.parse(t)}catch(n){n,i={}}return s=(s="Unable to save")+": "+(i.error||e),$.error_message(s)},t.prototype.actionUrl=function(t){var e;return e=t.hasClass("true")?"unaction-url":"action-url",t.data(e)},t.prototype.ajax=function(t){var e,i,s;return e={beforeSend:t.beforeSend,success:t.success,error:t.error,successWithData:t.successWithData},delete t.beforeSend,delete t.success,delete t.error,delete t.successWithData,i={dataType:"json",beforeSend:(s=this,function(){return(null==e.beforeSend||!1!==e.beforeSend.call(s))&&s.setSaving()}),success:function(t){return function(i){if(t.showSuccess(i.success),null!=e.success&&e.success.call(t),null!=e.successWithData)return e.successWithData.call(t,i)}}(this),error:function(t){return function(i){if(t.showResponseErrorOrDefault(i.responseText,"An unknown error occurred"),null!=e.error)return e.error.call(t)}}(this)},$.ajax($.extend(i,t))},t.prototype.confirmFeatureImageCreation=function(t){var e;return e="upcoming"===t.toLowerCase()?"This case is already scheduled to be featured.":"This case was previously featured on "+t+".",confirm(e+"\n\nAre you sure you want to feature it again?")},t.prototype.downloadImage=function(t){return $.magnificPopup.open({items:{src:this.actionUrl(t)},type:"ajax"})},t.prototype.pinImage=function(t){var e,i;return i=(e=this.currentImage()).is_flagged?"DELETE":"PUT",this.ajax({url:this.actionUrl(t),type:"POST",data:{_method:i},success:function(){return this.stack().toggleAttributeIsActive("is_flagged"),this.updatePinIcon(e)}})},t.prototype.featureImage=function(t){var e,i;return i=(e=this.currentImage()).is_featured?"DELETE":"POST",this.ajax({url:this.actionUrl(t),type:"POST",data:{_method:i,"feature_image[image_id]":this.currentImage().id},beforeSend:function(){if(!e.is_featured&&this.stack().featuredStatus&&!this.confirmFeatureImageCreation(this.stack().featuredStatus))return!1},success:function(){return this.stack().toggleAttributeIsActive("is_featured"),this.stack().featuredStatus="Upcoming",this.updateFeatureIcon(e)}})},t.prototype.setKeyImage=function(t){return this.ajax({url:this.actionUrl(t),type:"POST",data:{"image[set_as_stack_poster]":1,_method:"PUT"},successWithData:(e=this,function(i){if("stack-key"===t.data().name)return e.stack().setCurrentAsStackKeyImage(),e.updateStackKeyIcon(e.currentImage()),e.stack().updateStackThumbnail(i.new_thumbnail)})});var e},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).RefactoredStackToolbar=t}.call(this),function(){var t;t=function(){function t(t,e){var i;e=e||{},this.stacks=[],this.stacksToLoad=[],this.stackView=new StackView(e.stackViewEl),this.stackView.stackController=this,$(this.stackView).on("startLoadingNextStack",(i=this,function(){return i.startLoadingNextStack()})),this.toolbar=new RefactoredStackToolbar,this.toolbar.addToStackView(this.stackView),this.remainingCounter=this.stackView.el.closest(".image_gallery").find(".image-desc"),this.getStacks(t,e.thumbnailGalleryEl)}return t.prototype.getStacks=function(t,e){var i,s,n,o,r,a;for(n=s=0,o=t.length;s<o;n=++s)i=t[n],null!=e&&t.length>1&&(a=e.find("li[data-collection-index="+n+"] img.thumbnail")),r=new Stack(i,a),this.stacks.push(r);return this.stacksToLoad=this.stacks.slice(0),this.setStackWithPosition(0)},t.prototype.setStackWithPosition=function(t){var e;if(this.stacks.length>0)return this.hideRemainingCounter(),this.stopStacksLoading(),e=this.stacks[t],this.stackView.setStack(e),this.loadStackImages(e,!0)},t.prototype.createStack=function(t){return this.stacks.push(new Stack(t)),this.setStackWithPosition(this.stacks.length-1)},t.prototype.addStack=function(t){return this.stacks.push(t)},t.prototype.updateRemainingCounter=function(t){var e,i;return(i=t.numberOfImagesRemainingToLoad())&&t.images.length>1?(this.showRemainingCounter(),e=1===i?" image":" images",this.remainingCounter.find("span.remaining").text(i+e)):this.hideRemainingCounter()},t.prototype.showRemainingCounter=function(){return this.remainingCounter.show()},t.prototype.hideRemainingCounter=function(){return this.remainingCounter.hide()},t.prototype.loadStackImages=function(t,e){return t.startLoadingImages(),$(t).on("load-image",(i=this,function(){if(e&&i.updateRemainingCounter(t),0===t.numberOfImagesRemainingToLoad()&&(i.stacksToLoad.splice(i.stacksToLoad.indexOf(t),1),i.stackView.inView))return i.startLoadingNextStack()}));var i},t.prototype.startLoadingNextStack=function(){return this.stacksToLoad.length>0?this.loadStackImages(this.stacksToLoad[0],!1):(Radiopaedia.galleryLoading=!1,"production"===window.env&&Math.random()<.999?void 0:jQuery.ajax({url:"/performance_timings",contentType:"application/json",data:JSON.stringify({timings:{kind:"stack_preloading",action_log:{pathname:document.location.pathname,preload_method:"stack_controller",preload_finish_time:performance.now(),preload_stack_count:this.stacks.length,preload_image_count:this.stacks.reduce(function(t,e){return t+e.loadedImages.length},0)}}}),dataType:"text",global:!1,method:"POST"}))},t.prototype.stopStacksLoading=function(){var t,e,i,s,n;for(s=[],t=0,e=(i=this.stacks).length;t<e;t++)(n=i[t]).stopLoadingImages(),s.push($(n).unbind("load-image"));return s},t}(),("undefined"!=typeof exports&&null!==exports?exports:this).StackController=t}.call(this),function(){new(function(){function t(){this.bind()}return t.prototype.vTable=function(){var t;return{feature:(t=this).featureImage,pin:t.pinImage,download:t.downloadImage,"case-key":function(e){return t.setKeyImage(e,".case .toolbar .icon.case-key")},"stack-key":function(e){return t.setKeyImage(e,e.parents(".stack").find(".toolbar .icon.stack-key"))}}},t.prototype.vTableCall=function(t,e){if(this.vTable()[t])return this.vTable()[t].call(this,e)},t.prototype.bind=function(){var t;return t=this,$(".toolbar .icon, .markers .icon").live("click",function(e){var i;if(e.preventDefault(),!(i=$(this)).attr("disabled"))return t.vTableCall(i.data("name"),i)})},t.prototype.setSaving=function(){return $.status_message("Saving...")},t.prototype.showSuccess=function(t){return $.success_message(t)},t.prototype.showResponseErrorOrDefault=function(t,e){var i,s;try{i=JSON.parse(t)}catch(n){n,i={}}return s=(s="Unable to save")+": "+(i.error||e),$.error_message(s)},t.prototype.actionUrl=function(t){var e;return e=t.hasClass("true")?"unaction-url":"action-url",t.data(e)},t.prototype.ajax=function(t,e){var i,s,n;return i={beforeSend:e.beforeSend,success:e.success,error:e.error,successWithData:e.successWithData},delete e.beforeSend,delete e.success,delete e.error,delete e.successWithData,s={dataType:"json",beforeSend:(n=this,function(){return(null==i.beforeSend||!1!==i.beforeSend.call(n))&&n.setSaving()}),success:function(t){return function(e){if(t.showSuccess(e.success),null!=i.success&&i.success.call(t),null!=i.successWithData)return i.successWithData.call(t,e)}}(this),error:function(t){return function(e){if(t.showResponseErrorOrDefault(e.responseText,"An unknown error occurred"),null!=i.error)return i.error.call(t)}}(this)},$.ajax($.extend(s,e))},t.prototype.confirmFeatureImageCreation=function(t){var e;return e="upcoming"===t.toLowerCase()?"This case is already scheduled to be featured.":"This case was previously featured on "+t+".",confirm(e+"\n\nAre you sure you want to feature it again?")},t.prototype.pinImage=function(t){var e;return e=t.hasClass("true")?"DELETE":"PUT",this.ajax(t,{url:this.actionUrl(t),type:"POST",data:{_method:e},success:function(){return t.toggleClass("true")}})},t.prototype.featureImage=function(t){var e;return e=t.hasClass("true")?"DELETE":"POST",this.ajax(t,{url:this.actionUrl(t),type:"POST",data:{_method:e,"feature_image[image_id]":t.data("image_id")},beforeSend:function(){var e;if(e=t.parents(".case-study[data-featured]"),!t.hasClass("true")&&e.length>0&&!this.confirmFeatureImageCreation(e.data("featured")))return!1},success:function(){return t.toggleClass("true")}})},t.prototype.downloadImage=function(t){return $.magnificPopup.open({items:{src:this.actionUrl(t)},type:"ajax"})},t.prototype.setKeyImage=function(t,e){return this.ajax(t,{url:this.actionUrl(t),type:"POST",data:{"image[set_as_stack_poster]":1,_method:"PUT"},successWithData:function(i){return $(t).closest("div.study").data("radiopaedia-study").updateCurrentStackThumbnail(i.new_thumbnail),$(e).removeClass("true"),t.addClass("true")}})},t}())}.call(this),videojs.options.flash.swf="/vendor/video-js.swf";